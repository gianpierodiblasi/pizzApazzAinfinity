class Z4Setting{static language=Z4Setting.initLanguage();static theme=Z4Setting.initTheme();static initLanguage(){let e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let i=e[t].trim();if(i.startsWith("z4language"))return i.substring(11)}return navigator.languages?navigator.languages[0].substring(0,2):navigator.language?navigator.language.substring(0,2):navigator.userLanguage?navigator.userLanguage.substring(0,2):"en"}static initTheme(){Z4Setting.theme="auto";let e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let i=e[t].trim();i.startsWith("z4theme")&&(Z4Setting.theme=i.substring(8))}return Z4Setting.setTheme(Z4Setting.theme),Z4Setting.theme}static setLanguage(e){let t=new Date;t.setTime(t.getTime()+31536e6),document.cookie="z4language="+e+";expires="+t.toUTCString()+";path="+Z4Loader.path,Z4Setting.language=e}static getLanguage(){return Z4Setting.language}static setTheme(e){Z4Setting.theme=e;let t=new Date;switch(t.setTime(t.getTime()+31536e6),document.cookie="z4theme="+e+";expires="+t.toUTCString()+";path="+Z4Loader.path,Z4Setting.theme){case"auto":window.matchMedia?Z4Setting.addDarkModeListener():document.body.classList.remove("z4-dark");break;case"light":document.body.classList.remove("z4-dark");break;case"dark":document.body.classList.add("z4-dark")}}static addDarkModeListener(){if("auto"===Z4Setting.theme){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("z4-dark"):document.body.classList.remove("z4-dark");let e=new Object;e.once=!0,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>Z4Setting.addDarkModeListener()),e)}}static getTheme(){return Z4Setting.theme}constructor(){}}class Z4HTMLFactory{static HTML=Z4HTMLFactory.initHTML();static get(e){return Z4HTMLFactory.HTML[e]}static initHTML(){let e=new Array,t=new XMLHttpRequest;return Z4Loader.allFiles?(t.open("GET",Z4Loader.UP+"src/giada/html_list.properties?random="+Math.random(),!1),t.send(),new String(t.responseText).split("\n").forEach((i=>{i&&!i.startsWith("#")&&(t.open("GET",Z4Loader.UP+"src/"+i,!1),t.send(),e[i]=t.responseText)}))):(t.open("GET",Z4Loader.UP+"build/bundle-"+Z4Loader.version+".html",!1),t.send(),Z4HTMLFactory.readHTMLs(e,t.responseText)),e}static readHTMLs(e,t){new String(t).split("\n").forEach((t=>{if(t){let i=t.split(":=");e[i[0].trim()]=i[1].trim()}}))}constructor(){}}class Z4MessageFactory{static MESSAGE=Z4MessageFactory.initMessages();static get(e){return Z4MessageFactory.MESSAGE[e]}static changingLanguage(){Z4MessageFactory.MESSAGE=Z4MessageFactory.initMessages(),document.querySelectorAll("[data-token-lang-inner_text]").forEach((e=>e.innerHTML=Z4MessageFactory.get(e.getAttribute("data-token-lang-inner_text"))))}static initMessages(){let e=new Array,t=Z4Loader.UP+(Z4Loader.allFiles?"src/message/":"build/message/"),i=Z4Loader.allFiles?"message-"+Z4Setting.getLanguage()+".properties?random="+Math.random():"message-"+Z4Setting.getLanguage()+"-"+Z4Loader.version+".properties",s=new XMLHttpRequest;if(s.open("GET",t+i,!1),s.send(),Z4MessageFactory.readMessages(e,s.responseText),0===Object.keys(e).length){Z4Setting.setLanguage("en"),i=Z4Loader.allFiles?"message-en.properties?random="+Math.random():"message-en-"+Z4Loader.version+".properties";let s=new XMLHttpRequest;s.open("GET",t+i,!1),s.send(),Z4MessageFactory.readMessages(e,s.responseText)}return e}static readMessages(e,t){new String(t).split("\n").forEach((t=>{if(t&&!t.startsWith("#")){let i=t.split("=");e[i[0].trim()]=i[1].trim()}}))}constructor(){}}class Z4ImageFactory{static IMAGES=Z4ImageFactory.initImages();static get(e){return Z4ImageFactory.IMAGES[e]}static initImages(){let e=new Array,t=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/"),i=Z4Loader.allFiles?"image_list.properties?random="+Math.random():"image_list-"+Z4Loader.version+".properties",s=new XMLHttpRequest;return s.open("GET",t+i,!1),s.send(),Z4ImageFactory.readImages(t,e,new String(s.responseText).split("\n")),e}static readImages(e,t,i){i.forEach((s=>{if(s&&!s.startsWith("#")){let n=s.split("="),a=new Image;a.onload=s=>Z4ImageFactory.readImages(e,t,i.slice(1)),a.src=e+n[1].trim(),t[n[0].trim()]=a}}))}constructor(){}}class Z4AbstractComponentUI{root=null;devicePixelRatioListener=null;constructor(e){this.root=document.createElement("div"),this.root.id=this.getUniqueID(),this.root.innerHTML=e;let t=this.root.querySelectorAll("#"+this.root.id+" [data-token-lang-inner_text]");for(let e=0;e<t.length;e++){let i=t.item(e);i.innerHTML=Z4MessageFactory.get(i.getAttribute("data-token-lang-inner_text"))}}getUniqueID(){return"id"+(new Date).getTime()+"_"+parseInt(1e3*Math.random())}getUniqueName(){return"name"+(new Date).getTime()+"_"+parseInt(1e3*Math.random())}initDevicePixelRatio(e){window.matchMedia&&(this.devicePixelRatioListener=()=>{e(),this.addDevicePixelRatioListener()},this.addDevicePixelRatioListener())}addDevicePixelRatioListener(){let e=new Object;e.once=!0,window.matchMedia("(resolution: "+window.devicePixelRatio+"dppx)").addEventListener("change",this.devicePixelRatioListener,e)}disposeDevicePixelRatio(){window.matchMedia&&window.matchMedia("(resolution: "+window.devicePixelRatio+"dppx)").removeEventListener("change",this.devicePixelRatioListener)}dispose(){}querySelector(e){return this.root.querySelector(e)}querySelectorAll(e){return this.root.querySelectorAll(e)}appendToElement(e){return e.appendChild(this.root),this}appendToComponent(e){return e.root.appendChild(this.root),this}prependElement(e){return this.root.prepend(e),this}prependComponent(e){return this.root.prepend(e.root),this}}class Z4AbstractComponentWithValueUI extends Z4AbstractComponentUI{value=null;onchange=e=>{};oninput=e=>{};constructor(e){super(e)}setValue(e){}getValue(){return this.value}}class Z4ModalMessageUI{static html=Z4ModalMessageUI.loadHTML();static modal=new bootstrap.Modal(Z4ModalMessageUI.html);static loadHTML(){let e=document.createElement("div");return e.id=(new Date).getTime()+"-"+parseInt(1e3*Math.random()),e.setAttribute("data-bs-backdrop","static"),e.setAttribute("data-bs-keyboard","false"),e.setAttribute("tabindex","-1"),e.setAttribute("style","display:none"),e.className="modal modal-dialog-centered fade",e.innerHTML=Z4HTMLFactory.get("giada/pizzapazza/ui/Z4ModalMessageUI.html"),document.body.appendChild(e),e}static showInfo(e,t,i){Z4ModalMessageUI.showOneButton(e,t,i,"bi bi-info-circle-fill","#0dcaf0")}static showWarning(e,t,i){Z4ModalMessageUI.showOneButton(e,t,i,"bi bi-exclamation-triangle-fill","#ffc107")}static showError(e,t,i){Z4ModalMessageUI.showOneButton(e,t,i,"bi bi-exclamation-octagon-fill","#dc3545")}static showOneButton(e,t,i,s,n){Z4ModalMessageUI.html.querySelector(".modal-title").innerHTML=e,Z4ModalMessageUI.html.querySelector(".modal-message").innerHTML=t;let a=Z4ModalMessageUI.html.querySelector(".modal-icon i");a.className=s,a.style.color=n;let r=Z4ModalMessageUI.html.querySelector(".modal-footer");r.innerHTML="",Z4ModalMessageUI.appendButton(Z4MessageFactory.get("OK"),"btn btn-primary",i,r),Z4ModalMessageUI.modal.show()}static showQuestion(e,t,i,s,n,a){let r=new Array,o=new Array,l=new Array;Z4ModalMessageUI.push("YES",i,!0,r,o,l),Z4ModalMessageUI.push("NO",s,!1,r,o,l),Z4ModalMessageUI.push("OK",n,!0,r,o,l),Z4ModalMessageUI.push("CANCEL",a,!1,r,o,l),Z4ModalMessageUI.showOpenQuestion(e,t,r,o,l)}static push(e,t,i,s,n,a){t&&(s.push(Z4MessageFactory.get(e)),n.push(t),a.push(i))}static showOpenQuestion(e,t,i,s,n){Z4ModalMessageUI.html.querySelector(".modal-title").innerHTML=e,Z4ModalMessageUI.html.querySelector(".modal-message").innerHTML=t;let a=Z4ModalMessageUI.html.querySelector(".modal-icon i");a.className="bi bi-question-circle-fill",a.style.color="#6c757d";let r=Z4ModalMessageUI.html.querySelector(".modal-footer");r.innerHTML="",i.forEach(((e,t,i)=>{Z4ModalMessageUI.appendButton(e,"btn "+(n[t]?"btn-primary":"btn-secondary"),s[t],r)})),Z4ModalMessageUI.modal.show()}static appendButton(e,t,i,s){let n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-bs-dismiss","modal"),n.className=t,n.innerHTML=e,n.onclick=e=>(i(),null),s.appendChild(n)}constructor(){}}class Z4Math{static TWO_PI=2*Math.PI;static HALF_PI=Math.PI/2;static GOLD_SECTION=(1+Math.sqrt(5))/2;static SQUARE_GOLD_SECTION=Z4Math.GOLD_SECTION*Z4Math.GOLD_SECTION;static RAD2DEG=180/Math.PI;static DEG2RAD=Math.PI/180;static rad2deg(e){return e*Z4Math.RAD2DEG}static deg2rad(e){return e*Z4Math.DEG2RAD}static distance(e,t,i,s){let n=e-i,a=t-s;return Math.sqrt(n*n+a*a)}static atan(e,t,i,s){let n=Math.atan2(s-t,i-e);return n<0?n+Z4Math.TWO_PI:n}static ripple(e,t,i,s){let n=(i-t)*s*Math.random();return(e+=Math.random()>.5?n:-n)<t?t:e>i?i:e}constructor(){}}class Z4Sign{static POSITIVE=new Z4Sign(1);static NEGATIVE=new Z4Sign(-1);static RANDOM=new Z4Sign(0);sign=0;constructor(e){this.sign=e}next(){switch(this.sign){case 1:case-1:return this.sign;case 0:default:return Math.random()>.5?1:-1;case 2:case-2:return this.sign*=-1,this.sign/2}}static alternate(){return new Z4Sign(-2)}}class Z4SignedValue{sign=Z4Sign.RANDOM;value=0;getSign(){return this.sign}setSign(e){return this.sign=e,this}getValue(){return this.value}setValue(e){return this.value=e,this}next(){return this.sign.next()*this.value}}class Z4SignedRandomValue{sign=Z4Sign.RANDOM;value=0;type=0;length=0;step=0;prevRandom=0;controlRandom=0;nextRandom=0;bezierCurve=null;constructor(e,t,i){this.value=e,this.type=t,this.length=i,this.step=0,this.prevRandom=Math.random(),this.controlRandom=1,this.nextRandom=Math.random(),1===this.type&&this.createBezierCurve()}createBezierCurve(){this.bezierCurve=new Bezier(0,this.prevRandom,this.length/2,this.controlRandom,1,this.nextRandom)}isClassic(){return 0===this.type}isBezier(){return 1===this.type}isPolyline(){return 2===this.type}isStepped(){return 3===this.type}getSign(){return this.sign}setSign(e){return this.sign=e,this}getValue(){return this.value}setValue(e){return this.value=e,this}getLength(){return this.length}setLength(e){return this.length=e,this}nextUnsigned(){switch(this.type){case 0:default:return this.value*Math.random();case 1:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.controlRandom=1===this.controlRandom?0:1,this.nextRandom=Math.random(),this.createBezierCurve()):this.step++,this.value*this.bezierCurve.get(this.step/this.length).y;case 2:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.nextRandom=Math.random()):this.step++,this.value*((this.nextRandom-this.prevRandom)*this.step/this.length+this.prevRandom);case 3:return this.step===this.length?(this.step=0,this.prevRandom=Math.random()):this.step++,this.value*this.prevRandom}}nextSigned(){return this.sign.next()*this.nextUnsigned()}static classic(e){return new Z4SignedRandomValue(e,0,1)}static bezier(e,t){return new Z4SignedRandomValue(e,1,t)}static polyline(e,t){return new Z4SignedRandomValue(e,2,t)}static stepped(e,t){return new Z4SignedRandomValue(e,3,t)}}class Z4FancifulValue{constant=new Z4SignedValue;random=Z4SignedRandomValue.classic(0);uniformSign=!1;setConstant(e){return this.constant=e,this}getConstant(){return this.constant}setRandom(e){return this.random=e,this}getRandom(){return this.random}setUniformSign(e){return this.uniformSign=e,this}isUniformSign(){return this.uniformSign}next(){return this.uniformSign?this.constant.getSign().next()*(this.constant.getValue()+this.random.nextUnsigned()):this.constant.next()+this.random.nextSigned()}}class Z4Rotation{type=0;startAngle=0;angle=new Z4FancifulValue;delayed=!1;rotationNext=0;constructor(e){this.type=e}isFixed(){return 0===this.type}isCumulative(){return 1===this.type}isRelativeToPath(){return 2===this.type}getStartAngle(){return this.startAngle}setStartAngle(e){return this.startAngle=e,this}getAngle(){return this.angle}setAngle(e){return this.angle=e,this}isDelayed(){return this.delayed}setDelayed(e){return this.delayed=e,this}next(e){let t=Z4Math.deg2rad(this.startAngle+this.angle.next());switch(this.type){case 0:return t+(this.delayed?Math.PI:0);case 1:return this.rotationNext+=t,this.rotationNext+(this.delayed?Math.PI:0);case 2:return t+e+(this.delayed?Math.PI:0);default:return 0}}nextSide(e,t){switch(this.type){case 0:case 1:e.setSide(Z4Sign.POSITIVE);break;case 2:e.setSide(t?t.direction(e.getZ4Vector()):Z4Sign.RANDOM)}}static fixed(){return new Z4Rotation(0)}static cumulative(){return new Z4Rotation(1)}static relativeToPath(){return new Z4Rotation(2)}}class Z4Vector{x0=0;y0=0;x=0;y=0;module=0;phase=0;constructor(e,t,i,s,n,a){this.x0=e,this.y0=t,this.x=i,this.y=s,this.module=n,this.phase=a}static fromPoints(e,t,i,s){return new Z4Vector(e,t,i,s,Z4Math.distance(e,t,i,s),Z4Math.atan(e,t,i,s))}static fromVector(e,t,i,s){return new Z4Vector(e,t,e+i*Math.cos(s),t+i*Math.sin(s),i,s)}clone(){return new Z4Vector(this.x0,this.y0,this.x,this.y,this.module,this.phase)}getX0(){return this.x0}getY0(){return this.y0}getX(){return this.x}getY(){return this.y}getModule(){return this.module}getPhase(){return this.phase}direction(e){let t=this.x-this.x0,i=this.y-this.y0,s=e.x-e.x0,n=e.y-e.y0;return Math.atan2(t*n-i*s,t*s+i*n)>=0?Z4Sign.POSITIVE:Z4Sign.NEGATIVE}}class Z4Point{z4Vector=Z4Vector.fromPoints(0,0,1,1);intensity=1;lighting=Z4Lighting.NONE;colorPosition=-1;drawBounds=!1;side=Z4Sign.RANDOM;useVectorModuleAsSize=!1;clone(){let e=new Z4Point;return e.z4Vector=this.z4Vector.clone(),e.intensity=this.intensity,e.lighting=this.lighting,e.colorPosition=this.colorPosition,e.drawBounds=this.drawBounds,e.side=this.side,e.useVectorModuleAsSize=this.useVectorModuleAsSize,e}getZ4Vector(){return this.z4Vector}setZ4Vector(e){return this.z4Vector=e,this}getIntensity(){return this.intensity}setIntensity(e){return this.intensity=e,this}getLighting(){return this.lighting}setLighting(e){return this.lighting=e,this}getColorPosition(){return this.colorPosition}setColorPosition(e){return this.colorPosition=e,this}isDrawBounds(){return this.drawBounds}setSide(e){return this.side=e,this}isUseVectorModuleAsSize(){return this.useVectorModuleAsSize}}class Z4SignedValueUI extends Z4AbstractComponentWithValueUI{valueLabel=this.querySelector(".signed-value-value-label");radioSpinner=this.querySelector(".signed-value-radio-spinner");radioRange=this.querySelector(".signed-value-radio-range");spinner=this.querySelector(".signed-value-range-input");applySpin=()=>this.spin();applyMinusPlus=(e,t)=>this.doMinusPlus(e,t,this.isApplyMinusPlus,(()=>this.applyMinusPlus(e,Math.min(50,t+1))));isApplySpin=!1;isApplyMinusPlus=!1;timeoutID=0;signVisible=!0;min=0;max=1e9;static PATH=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/");static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4SignedValueUI.html");constructor(){super(Z4SignedValueUI.UI);let e=this.querySelectorAll(".signed-value-sign-dropdown-menu img");for(let t=0;t<e.length;t++){let i=e.item(t);i.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+i.getAttribute("data-icon")+".svg")}let t=this.querySelectorAll(".signed-value-sign-dropdown-menu button");for(let e=0;e<t.length;e++){let i=t.item(e);i.onclick=e=>{switch(this.querySelector(".signed-value-sign-button img").setAttribute("src",i.querySelector("img").getAttribute("src")),i.getAttribute("data-value")){case"positive":this.onchange(this.value.setSign(Z4Sign.POSITIVE));break;case"negative":this.onchange(this.value.setSign(Z4Sign.NEGATIVE));break;case"random":this.onchange(this.value.setSign(Z4Sign.RANDOM));break;case"alternate":this.onchange(this.value.setSign(Z4Sign.alternate()))}return null}}let i=this.getUniqueName();this.radioSpinner.id=this.getUniqueID(),this.radioSpinner.setAttribute("name",i),this.radioSpinner.onchange=e=>(this.spinner.setAttribute("min","-50"),this.spinner.setAttribute("max","50"),this.spinner.value="0",null),this.querySelector(".signed-value-radio-spinner-label").setAttribute("for",this.radioSpinner.id),this.radioRange.id=this.getUniqueID(),this.radioRange.setAttribute("name",i),this.radioRange.onchange=e=>(this.configureRange(),null),this.querySelector(".signed-value-radio-range-label").setAttribute("for",this.radioRange.id);let s=this.querySelector(".signed-value-range-minus"),n=this.querySelector(".signed-value-range-plus");Z4Loader.touch?(this.spinner.ontouchstart=e=>this.startSpin(),this.spinner.ontouchend=e=>this.stopSpin(),s.ontouchstart=e=>this.minusPlus(-1),s.ontouchend=e=>this.minusPlus(0),n.ontouchstart=e=>this.minusPlus(1),n.ontouchend=e=>this.minusPlus(0)):(this.spinner.onmousedown=e=>this.startSpin(),this.spinner.onmouseup=e=>this.stopSpin(),s.onmousedown=e=>this.minusPlus(-1),s.onmouseup=e=>this.minusPlus(0),s.onmouseleave=e=>this.minusPlus(0),n.onmousedown=e=>this.minusPlus(1),n.onmouseup=e=>this.minusPlus(0),n.onmouseleave=e=>this.minusPlus(0)),this.spinner.oninput=e=>{if(this.radioRange.checked){let e=this.getReversedValue(this.spinner.valueAsNumber);this.valueLabel.innerText=""+e,this.oninput(this.value.setValue(e))}return null},this.spinner.onchange=e=>{if(this.radioRange.checked){let e=this.getReversedValue(this.spinner.valueAsNumber);this.valueLabel.innerText=""+e,this.onchange(this.value.setValue(e))}return null},this.setValue(new Z4SignedValue)}startSpin(){return this.radioSpinner.checked&&(this.isApplySpin=!0,this.applySpin()),null}stopSpin(){return this.radioSpinner.checked&&(this.isApplySpin=!1,this.spinner.value="0",this.onchange(this.value)),null}spin(){let e=Math.max(1,Math.abs(this.spinner.valueAsNumber));this.spinner.valueAsNumber?this.doMinusPlus(this.spinner.valueAsNumber>0?1:-1,e,this.isApplySpin,this.applySpin):(clearTimeout(this.timeoutID),this.isApplySpin&&(this.timeoutID=setTimeout(this.applySpin,500/e)))}minusPlus(e){return e?(this.isApplyMinusPlus=!0,this.applyMinusPlus(e,1)):(this.isApplyMinusPlus=!1,clearTimeout(this.timeoutID),this.onchange(this.value)),null}doMinusPlus(e,t,i,s){let n=this.getRangedValue(this.max),a=Math.max(0,this.getRangedValue(this.value.getValue())+e);a=Math.min(a,n);let r=this.getReversedValue(a);this.valueLabel.innerText=""+r,this.radioRange.checked&&(this.spinner.value=""+a),this.oninput(this.value.setValue(r)),clearTimeout(this.timeoutID),i&&(this.timeoutID=setTimeout(s,500/t))}setRange(e,t){return this.min=e,this.max=t,this.querySelector(".signed-value-range-span").innerHTML="["+e+","+(1e9===t?"&infin;":t)+"]",this.radioRange.checked&&this.configureRange(),this}configureRange(){this.spinner.setAttribute("min","0"),this.spinner.setAttribute("max",""+this.getRangedValue(this.max)),this.spinner.value=""+this.getRangedValue(this.value.getValue())}getRangedValue(e){let t=0,i=this.min;for(;i<e;)t++,i<100?i++:i<1e3?i+=10:i<1e4?i+=100:i<1e5?i+=1e3:i<1e6?i+=1e4:i<1e7?i+=1e5:i<1e8?i+=1e6:i<1e9&&(i+=1e7);return t}getReversedValue(e){let t=0,i=this.min;for(;t<e;)t++,i<100?i++:i<1e3?i+=10:i<1e4?i+=100:i<1e5?i+=1e3:i<1e6?i+=1e4:i<1e7?i+=1e5:i<1e8?i+=1e6:i<1e9&&(i+=1e7);return i}setCompact(){return this.querySelector(".signed-value-compact-button").style.display="inline-block",this.querySelector(".signed-value-compact-dropdown-menu li").appendChild(this.querySelector(".signed-value-range-minus")),this.querySelector(".signed-value-compact-dropdown-menu li").appendChild(this.querySelector(".signed-value-form-control")),this.querySelector(".signed-value-compact-dropdown-menu li").appendChild(this.querySelector(".signed-value-range-plus")),this.querySelector(".signed-value-sign-button img").setAttribute("width","20"),this}setEnabled(e){return e?(this.querySelector(".signed-value-radio-spinner").removeAttribute("disabled"),this.querySelector(".signed-value-radio-range").removeAttribute("disabled"),this.querySelector(".signed-value-sign-button").removeAttribute("disabled"),this.querySelector(".signed-value-compact-button").removeAttribute("disabled"),this.querySelector(".signed-value-range-minus").removeAttribute("disabled"),this.querySelector(".signed-value-range-input").removeAttribute("disabled"),this.querySelector(".signed-value-range-plus").removeAttribute("disabled")):(this.querySelector(".signed-value-radio-spinner").setAttribute("disabled","disabled"),this.querySelector(".signed-value-radio-range").setAttribute("disabled","disabled"),this.querySelector(".signed-value-sign-button").setAttribute("disabled","disabled"),this.querySelector(".signed-value-compact-button").setAttribute("disabled","disabled"),this.querySelector(".signed-value-range-minus").setAttribute("disabled","disabled"),this.querySelector(".signed-value-range-input").setAttribute("disabled","disabled"),this.querySelector(".signed-value-range-plus").setAttribute("disabled","disabled")),this}setSignVisible(e){return this.signVisible=e,e?this.querySelector(".signed-value-input-group").classList.remove("sign-not-visible"):this.querySelector(".signed-value-input-group").classList.add("sign-not-visible"),this}isSignVisible(){return this.signVisible}setValueLabel(e,t,i){let s=this.querySelector(".signed-value-label");return s.setAttribute("data-token-lang-inner_text",e),s.innerHTML=Z4MessageFactory.get(e),s.style.fontWeight=t?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setValue(e){return this.value=e,this.valueLabel.innerText=""+this.value.getValue(),this.value.getSign()===Z4Sign.POSITIVE?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='positive']").getAttribute("src")):this.value.getSign()===Z4Sign.NEGATIVE?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='negative']").getAttribute("src")):this.value.getSign()===Z4Sign.RANDOM?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='random']").getAttribute("src")):this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='alternate']").getAttribute("src")),this}dispose(){}}class Z4SignedRandomValueUI extends Z4AbstractComponentWithValueUI{signedValueUI=(new Z4SignedValueUI).appendToComponent(this);lengthUI=(new Z4SignedValueUI).setSignVisible(!1).setValueLabel("LENGTH",!1,!1).setRange(1,1e9).appendToElement(this.querySelector(".signed-random-value-length-ui"));lengthBadge=this.querySelector(".signed-random-value-length-badge");static PATH=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/");static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4SignedRandomValueUI.html");constructor(){super(Z4SignedRandomValueUI.UI),this.signedValueUI.oninput=e=>this.oninput(this.value.setValue(e.getValue()).setSign(e.getSign())),this.signedValueUI.onchange=e=>this.onchange(this.value.setValue(e.getValue()).setSign(e.getSign())),this.signedValueUI.querySelector(".signed-value-input-group").appendChild(this.querySelector(".signed-random-value-type-button")),this.signedValueUI.querySelector(".signed-value-input-group").appendChild(this.querySelector(".signed-random-value-type-dropdown-menu"));let e=this.querySelectorAll(".signed-random-value-type-dropdown-menu img");for(let t=0;t<e.length;t++){let i=e.item(t);i.setAttribute("src",Z4SignedRandomValueUI.PATH+"z4randomvalue_"+i.getAttribute("data-icon")+".svg")}let t=this.querySelectorAll(".signed-random-value-type-dropdown-menu button");for(let e=0;e<t.length;e++){let i=t.item(e);i.onclick=e=>{this.querySelector(".signed-random-value-type-button img").setAttribute("src",i.querySelector("img").getAttribute("src"));let t=this.signedValueUI.getValue();switch(i.getAttribute("data-value")){case"classic":this.value=Z4SignedRandomValue.classic(t.getValue()).setSign(t.getSign());break;case"bezier":this.value=Z4SignedRandomValue.bezier(t.getValue(),this.lengthUI.getValue().getValue());break;case"polyline":this.value=Z4SignedRandomValue.polyline(t.getValue(),this.lengthUI.getValue().getValue());break;case"stepped":this.value=Z4SignedRandomValue.stepped(t.getValue(),this.lengthUI.getValue().getValue())}return this.lengthUI.setEnabled(!this.value.isClassic()),this.lengthBadge.style.display=this.value.isClassic()?"none":"inline-block",this.onchange(this.value.setSign(t.getSign())),null}}this.lengthUI.oninput=e=>{this.lengthBadge.innerText=""+e.getValue(),this.oninput(this.value.setLength(e.getValue()))},this.lengthUI.onchange=e=>{this.lengthBadge.innerText=""+e.getValue(),this.onchange(this.value.setLength(e.getValue()))},this.setValue(Z4SignedRandomValue.classic(0))}setCompact(){return this.signedValueUI.setCompact(),this.querySelector(".signed-random-value-type-button img").setAttribute("width","20"),this}setRange(e,t){return this.signedValueUI.setRange(e,t),this}setSignVisible(e){return this.signedValueUI.setSignVisible(e),this}setLengthRange(e,t){return this.lengthUI.setRange(e,t),this}setValueLabel(e,t,i){return this.signedValueUI.setValueLabel(e,t,i),this}setValue(e){return this.value=e,this.signedValueUI.setValue((new Z4SignedValue).setValue(this.value.getValue()).setSign(this.value.getSign())),this.value.isClassic()?this.querySelector(".signed-random-value-type-button img").setAttribute("src",this.querySelector(".signed-random-value-type-dropdown-menu img[data-icon='classic']").getAttribute("src")):this.value.isBezier()?this.querySelector(".signed-random-value-type-button img").setAttribute("src",this.querySelector(".signed-random-value-type-dropdown-menu img[data-icon='bezier']").getAttribute("src")):this.value.isPolyline()?this.querySelector(".signed-random-value-type-button img").setAttribute("src",this.querySelector(".signed-random-value-type-dropdown-menu img[data-icon='polyline']").getAttribute("src")):this.value.isStepped()&&this.querySelector(".signed-random-value-type-button img").setAttribute("src",this.querySelector(".signed-random-value-type-dropdown-menu img[data-icon='stepped']").getAttribute("src")),this.lengthUI.setEnabled(!this.value.isClassic()),this.lengthUI.setValue((new Z4SignedValue).setValue(this.value.getLength())),this.lengthBadge.style.display=this.value.isClassic()?"none":"inline-block",this.lengthBadge.innerText=""+this.value.getLength(),this}dispose(){}}class Z4FancifulValueUI extends Z4AbstractComponentWithValueUI{uniformCheck=this.querySelector(".fanciful-value-uniform-check");constantUI=(new Z4SignedValueUI).setCompact().setValueLabel("CONSTANT",!1,!0).appendToElement(this.querySelector(".fanciful-value-container"));randomUI=(new Z4SignedRandomValueUI).setCompact().setValueLabel("RANDOM",!1,!0).appendToElement(this.querySelector(".fanciful-value-container"));static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4FancifulValueUI.html");constructor(){super(Z4FancifulValueUI.UI),this.uniformCheck.id=this.getUniqueID(),this.querySelector(".fanciful-value-uniform-label").setAttribute("for",this.uniformCheck.id),this.uniformCheck.onchange=e=>(this.setSignsVisible(this.constantUI.isSignVisible()),this.onchange(this.value.setUniformSign(this.uniformCheck.checked)),null);let e=document.createElement("li");e.className="dropdown-divider";let t=document.createElement("li");t.appendChild(e),this.querySelector(".signed-value-sign-dropdown-menu").appendChild(t),t=document.createElement("li"),t.className="mx-1",t.appendChild(this.querySelector(".fanciful-value-uniform-form-switch")),this.querySelector(".signed-value-sign-dropdown-menu").appendChild(t),this.constantUI.oninput=e=>this.onInput(),this.randomUI.oninput=e=>this.onInput(),this.constantUI.onchange=e=>this.onChange(),this.randomUI.onchange=e=>this.onChange(),this.setValue(new Z4FancifulValue)}onInput(){return this.oninput(this.value.setConstant(this.constantUI.getValue()).setRandom(this.randomUI.getValue())),null}onChange(){return this.onchange(this.value.setConstant(this.constantUI.getValue()).setRandom(this.randomUI.getValue())),null}setSignsVisible(e){return this.constantUI.setSignVisible(e),this.randomUI.setSignVisible(!this.uniformCheck.checked&&e),this}setConstantRange(e,t){return this.constantUI.setRange(e,t),this}setRandomRange(e,t){return this.randomUI.setRange(e,t),this}setRandomLengthRange(e,t){return this.randomUI.setLengthRange(e,t),this}setValueLabel(e,t,i){let s=this.querySelector(".fanciful-value-label");return s.setAttribute("data-token-lang-inner_text",e),s.innerHTML=Z4MessageFactory.get(e),s.style.fontWeight=t?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setValue(e){return this.value=e,this.uniformCheck.checked=this.value.isUniformSign(),this.setSignsVisible(this.constantUI.isSignVisible()),this.constantUI.setValue(this.value.getConstant()),this.randomUI.setValue(this.value.getRandom()),this}dispose(){}}class Z4RotationUI extends Z4AbstractComponentWithValueUI{startAngle=(new Z4SignedValueUI).setCompact().setRange(0,360).setValueLabel("START_ANGLE",!0,!1).setSignVisible(!1).appendToElement(this.querySelector(".rotation-container"));delayedCheck=this.querySelector(".rotation-delayed-check");angle=(new Z4FancifulValueUI).setValueLabel("ANGLE",!0,!1).setConstantRange(0,180).setRandomRange(0,180).appendToElement(this.querySelector(".rotation-container"));static PATH=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/");static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4RotationUI.html");constructor(){super(Z4RotationUI.UI);let e=this.querySelectorAll(".rotation-type-dropdown-menu img");for(let t=0;t<e.length;t++){let i=e.item(t);i.setAttribute("src",Z4RotationUI.PATH+"z4rotation_"+i.getAttribute("data-icon")+".svg")}let t=this.querySelectorAll(".rotation-type-dropdown-menu .dropdown-item");for(let e=0;e<t.length;e++){let i=t.item(e);i.onclick=e=>{switch(this.querySelector(".rotation-type-button img").setAttribute("src",i.querySelector("img").getAttribute("src")),i.getAttribute("data-value")){case"fixed":this.value=Z4Rotation.fixed();break;case"cumulative":this.value=Z4Rotation.cumulative();break;case"relativetopath":this.value=Z4Rotation.relativeToPath()}return this.onchange(this.value.setAngle(this.angle.getValue()).setStartAngle(this.startAngle.getValue().getValue()).setDelayed(this.delayedCheck.checked)),null}}this.delayedCheck.id=this.getUniqueID(),this.querySelector(".rotation-delayed-label").setAttribute("for",this.delayedCheck.id),this.delayedCheck.onchange=e=>(this.querySelector(".rotation-delayed-badge").style.display=this.delayedCheck.checked?"inline-block":"none",this.onchange(this.value.setDelayed(this.delayedCheck.checked)),null);let i=this.startAngle.querySelector(".signed-value-compact-button span");i.innerHTML=i.innerText;for(let e=0;e<20;e++)i.innerHTML+="&nbsp";this.startAngle.oninput=e=>this.oninput(this.value.setStartAngle(e.getValue())),this.startAngle.onchange=e=>this.onchange(this.value.setStartAngle(e.getValue())),this.angle.oninput=e=>this.oninput(this.value.setAngle(e)),this.angle.onchange=e=>this.onchange(this.value.setAngle(e)),this.setValue(Z4Rotation.fixed())}setRandomLengthRange(e,t){return this.angle.setRandomLengthRange(e,t),this}setValueLabel(e,t,i){let s=this.querySelector(".rotation-label");return s.setAttribute("data-token-lang-inner_text",e),s.innerHTML=Z4MessageFactory.get(e),s.style.fontWeight=t?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setValue(e){return this.value=e,this.value.isFixed()?this.querySelector(".rotation-type-button img").setAttribute("src",this.querySelector(".rotation-type-dropdown-menu img[data-icon='fixed']").getAttribute("src")):this.value.isCumulative()?this.querySelector(".rotation-type-button img").setAttribute("src",this.querySelector(".rotation-type-dropdown-menu img[data-icon='cumulative']").getAttribute("src")):this.value.isRelativeToPath()&&this.querySelector(".rotation-type-button img").setAttribute("src",this.querySelector(".rotation-type-dropdown-menu img[data-icon='relativetopath']").getAttribute("src")),this.delayedCheck.checked=this.value.isDelayed(),this.querySelector(".rotation-delayed-badge").style.display=this.value.isDelayed()?"inline-block":"none",this.startAngle.setValue((new Z4SignedValue).setValue(this.value.getStartAngle())),this.angle.setValue(this.value.getAngle()),this}dispose(){}}class Z4Lighting{static NONE=new Z4Lighting;static LIGTHED=new Z4Lighting;static DARKENED=new Z4Lighting;constructor(){}}class Z4Color{a=0;r=0;g=0;b=0;argb=0;hex=null;constructor(e,t,i,s){this.a=e,this.r=t,this.g=i,this.b=s,this.init()}init(){return this.argb=this.a<<24|this.r<<16|this.g<<8|this.b,this.hex="#"+new Number(this.r).toString(16).padStart(2,"0")+new Number(this.g).toString(16).padStart(2,"0")+new Number(this.b).toString(16).padStart(2,"0")+new Number(this.a).toString(16).padStart(2,"0"),this}set(e){return this.a=e>>>24&255,this.r=e>>>16&255,this.g=e>>>8&255,this.b=255&e,this.init()}gray(){let e=parseInt(.21*this.r+.71*this.g+.08*this.b);return this.r=e,this.g=e,this.b=e,this.init()}negative(){return this.r=255-this.r,this.g=255-this.g,this.b=255-this.b,this.init()}lighted(e){return this.r=parseInt((255-this.r)*e+this.r),this.g=parseInt((255-this.g)*e+this.g),this.b=parseInt((255-this.b)*e+this.b),this.init()}darkened(e){return e=1-e,this.r=parseInt(e*this.r),this.g=parseInt(e*this.g),this.b=parseInt(e*this.b),this.init()}getComponents(){return new Array(this.a,this.r,this.g,this.b)}getARGB(){return this.argb}getHEX(){return this.hex}static fromARGB(e){return new Z4Color(e>>>24&255,e>>>16&255,e>>>8&255,255&e)}static fromHEX(e,t){let i=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(e);return new Z4Color(t,parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16))}static getFillStyle(e){return e}static fromZ4Colors(e,t,i){let s=e.getComponents(),n=t.getComponents();return new Z4Color(parseInt((n[0]-s[0])*i+s[0]),parseInt((n[1]-s[1])*i+s[1]),parseInt((n[2]-s[2])*i+s[2]),parseInt((n[3]-s[3])*i+s[3]))}}class Z4GradientColor{start=new Z4Color(255,255,255,255);stop=new Z4Color(255,0,0,0);ripple=0;mirrored=!1;setStartColor(e){return this.start.set(e),this}getStartColor(){return this.start}setStopColor(e){return this.stop.set(e),this}getStopColor(){return this.stop}setRipple(e){return this.ripple=e,this}getRipple(){return this.ripple}setMirrored(e){return this.mirrored=e,this}isMirrored(){return this.mirrored}negative(){return this.start.negative(),this.stop.negative(),this}inverted(){let e=this.start.getARGB();return this.start.set(this.stop.getARGB()),this.stop.set(e),this}getZ4ColorAt(e,t,i){return i&&this.mirrored&&(e=2*(e<.5?e:1-e)),t&&0!==this.ripple&&(e=Z4Math.ripple(e,0,1,this.ripple)),Z4Color.fromZ4Colors(this.start,this.stop,e)}getLinearGradient(e,t,i,s,n){let a=e.createLinearGradient(t,i,s,n);return a.addColorStop(0,this.start.getHEX()),a.addColorStop(1,this.stop.getHEX()),a}getRadialGradient(e,t,i,s,n,a,r){let o=e.createRadialGradient(t,i,s,n,a,r);return o.addColorStop(0,this.start.getHEX()),o.addColorStop(1,this.stop.getHEX()),o}getConicGradient(e,t,i,s){let n=e.createConicGradient(s,t,i);return n.addColorStop(0,this.start.getHEX()),n.addColorStop(1,this.stop.getHEX()),n}static fromZ4GradientColors(e,t,i){return(new Z4GradientColor).setStartColor(Z4Color.fromZ4Colors(e.getStartColor(),t.getStartColor(),i).getARGB()).setStopColor(Z4Color.fromZ4Colors(e.getStopColor(),t.getStopColor(),i).getARGB()).setRipple(e.getRipple()).setMirrored(e.isMirrored())}static fromStartStopZ4GradientColors(e,t,i){return(new Z4GradientColor).setStartColor(e.getZ4ColorAt(i,!1,!1).getARGB()).setStopColor(t.getZ4ColorAt(i,!1,!1).getARGB()).setRipple(e.getRipple()).setMirrored(e.isMirrored())}}class Z4ColorUI extends Z4AbstractComponentWithValueUI{color=this.querySelector(".color-input");opacityLabel=this.querySelector(".color-opacity-range-label");opacityRange=this.querySelector(".color-opacity-range");opacityBadge=this.querySelector(".color-opacity-badge");static UI=Z4HTMLFactory.get("giada/pizzapazza/color/ui/Z4ColorUI.html");constructor(){super(Z4ColorUI.UI),this.querySelector(".color-gray").onclick=e=>(this.setValue(this.value.gray()),this.onchange(this.value),null),this.querySelector(".color-negative").onclick=e=>(this.setValue(this.value.negative()),this.onchange(this.value),null),this.color.oninput=e=>(this.value=Z4Color.fromHEX(this.color.value,this.opacityRange.valueAsNumber),this.oninput(this.value),null),this.color.onchange=e=>(this.value=Z4Color.fromHEX(this.color.value,this.opacityRange.valueAsNumber),this.onchange(this.value),null),this.opacityRange.oninput=e=>(this.opacityLabel.innerText=this.opacityRange.value,this.opacityBadge.innerText=this.opacityRange.value,this.value=Z4Color.fromHEX(this.color.value,this.opacityRange.valueAsNumber),this.oninput(this.value),null),this.opacityRange.onchange=e=>(this.opacityLabel.innerText=this.opacityRange.value,this.opacityBadge.innerText=this.opacityRange.value,this.value=Z4Color.fromHEX(this.color.value,this.opacityRange.valueAsNumber),this.onchange(this.value),null),this.setValue(new Z4Color(255,0,0,0))}setColorLabel(e,t,i){let s=this.querySelector(".color-label");return s.setAttribute("data-token-lang-inner_text",e),s.innerHTML=Z4MessageFactory.get(e),s.style.fontWeight=t?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setOpacityBadgeVisible(e){return this.opacityBadge.style.display=e?"inline-block":"none",this}setValue(e){return this.value=e,this.color.value=this.value.getHEX().substring(0,7),this.opacityRange.valueAsNumber=this.value.getComponents()[0],this.opacityLabel.innerText=this.opacityRange.value,this.opacityBadge.innerText=this.opacityRange.value,this}dispose(){}}class Z4GradientColorUI extends Z4AbstractComponentWithValueUI{startColorUI=(new Z4ColorUI).setColorLabel("START",!1,!0).setOpacityBadgeVisible(!1).appendToElement(this.querySelector(".gradient-color-start-container"));canvas=this.querySelector(".gradient-color-canvas");stopColorUI=(new Z4ColorUI).setColorLabel("STOP",!1,!0).setOpacityBadgeVisible(!1).appendToElement(this.querySelector(".gradient-color-stop-container"));ctx=this.canvas.getContext("2d");chessboard=this.ctx.createPattern(Z4ImageFactory.get("CHESSBOARD"),"repeat");mirroredCheck=this.querySelector(".gradient-color-mirrored-check");rippleLabel=this.querySelector(".gradient-color-ripple-label");rippleRange=this.querySelector(".gradient-color-ripple-range");resizeObserver=new ResizeObserver((()=>this.drawCanvas()));static UI=Z4HTMLFactory.get("giada/pizzapazza/color/ui/Z4GradientColorUI.html");constructor(){super(Z4GradientColorUI.UI),this.initDevicePixelRatio((()=>this.drawCanvas())),this.resizeObserver.observe(this.canvas),this.querySelector(".gradient-color-inverted").onclick=e=>(this.setValue(this.value.inverted()),this.onchange(this.value),null),this.querySelector(".gradient-color-negative").onclick=e=>(this.setValue(this.value.negative()),this.onchange(this.value),null),this.mirroredCheck.id=this.getUniqueID(),this.querySelector(".gradient-color-mirrored-label").setAttribute("for",this.mirroredCheck.id),this.mirroredCheck.onchange=e=>(this.onchange(this.value.setMirrored(this.mirroredCheck.checked)),this.drawCanvas(),null),this.rippleRange.oninput=e=>(this.rippleLabel.innerText=this.rippleRange.value,this.oninput(this.value.setRipple(this.rippleRange.valueAsNumber)),this.drawCanvas(),null),this.rippleRange.onchange=e=>(this.rippleLabel.innerText=this.rippleRange.value,this.onchange(this.value.setRipple(this.rippleRange.valueAsNumber)),this.drawCanvas(),null),this.startColorUI.oninput=e=>{this.oninput(this.value.setStartColor(e.getARGB())),this.drawCanvas()},this.startColorUI.onchange=e=>{this.onchange(this.value.setStartColor(e.getARGB())),this.drawCanvas()},this.stopColorUI.oninput=e=>{this.oninput(this.value.setStopColor(e.getARGB())),this.drawCanvas()},this.stopColorUI.onchange=e=>{this.onchange(this.value.setStopColor(e.getARGB())),this.drawCanvas()},this.setValue(new Z4GradientColor)}setGradientColorLabel(e,t,i){let s=this.querySelector(".gradient-color-label");return s.setAttribute("data-token-lang-inner_text",e),s.innerHTML=Z4MessageFactory.get(e),s.style.fontWeight=t?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setValue(e){return this.value=e,this.mirroredCheck.checked=this.value.isMirrored(),this.rippleRange.valueAsNumber=this.value.getRipple(),this.rippleLabel.innerText=this.rippleRange.value,this.startColorUI.setValue(this.value.getStartColor()),this.stopColorUI.setValue(this.value.getStopColor()),this.drawCanvas(),this}drawCanvas(){if(this.canvas.clientWidth){this.canvas.width=Math.floor(this.canvas.clientWidth*window.devicePixelRatio),this.canvas.height=Math.floor(this.canvas.clientHeight*window.devicePixelRatio);let e=new OffscreenCanvas(this.canvas.clientWidth,this.canvas.clientHeight),t=e.getContext("2d");for(let e=0;e<this.canvas.clientWidth;e++)t.fillStyle=this.value.getZ4ColorAt(e/this.canvas.clientWidth,!0,!0).getHEX(),t.fillRect(e,0,1,this.canvas.clientHeight);this.ctx.save(),this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),this.ctx.fillStyle=this.chessboard,this.ctx.fillRect(0,0,this.canvas.clientWidth,this.canvas.clientHeight),this.ctx.drawImage(e,0,0),this.ctx.restore()}}dispose(){this.disposeDevicePixelRatio(),this.resizeObserver.unobserve(this.canvas)}}
//# sourceMappingURL=bundle-0.14.0.min.js.map