class Z4Setting{static language=Z4Setting.initLanguage();static theme=Z4Setting.initTheme();static mode=Z4Setting.initMode();static initLanguage(){let t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let i=t[e].trim();if(i.startsWith("z4language"))return i.substring(11)}return navigator.languages?navigator.languages[0].substring(0,2):navigator.language?navigator.language.substring(0,2):navigator.userLanguage?navigator.userLanguage.substring(0,2):"en"}static initTheme(){Z4Setting.theme="auto";let t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let i=t[e].trim();i.startsWith("z4theme")&&(Z4Setting.theme=i.substring(8))}return Z4Setting.setTheme(Z4Setting.theme),Z4Setting.theme}static initMode(){Z4Setting.mode="standard";let t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let i=t[e].trim();i.startsWith("z4mode")&&(Z4Setting.mode=i.substring(7))}return Z4Setting.setMode(Z4Setting.mode),Z4Setting.mode}static setLanguage(t){let e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="z4language="+t+";expires="+e.toUTCString()+";path="+Z4Loader.path,Z4Setting.language=t}static getLanguage(){return Z4Setting.language}static setTheme(t){Z4Setting.theme=t;let e=new Date;switch(e.setTime(e.getTime()+31536e6),document.cookie="z4theme="+t+";expires="+e.toUTCString()+";path="+Z4Loader.path,Z4Setting.theme){case"auto":window.matchMedia?Z4Setting.addDarkModeListener():document.body.classList.remove("z4-dark");break;case"light":document.body.classList.remove("z4-dark");break;case"dark":document.body.classList.add("z4-dark")}}static addDarkModeListener(){if("auto"===Z4Setting.theme){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("z4-dark"):document.body.classList.remove("z4-dark");let t=new Object;t.once=!0,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>Z4Setting.addDarkModeListener()),t)}}static getTheme(){return Z4Setting.theme}static setMode(t){Z4Setting.mode=t,document.body.classList.remove("z4-lite"),document.body.classList.remove("z4-standard"),document.body.classList.remove("z4-pro"),document.body.classList.add("z4-"+t);let e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="z4mode="+t+";expires="+e.toUTCString()+";path="+Z4Loader.path}static getMode(){return Z4Setting.mode}static isLiteMode(){return"lite"===Z4Setting.mode}static isStandardMode(){return"standard"===Z4Setting.mode}static isProMode(){return"pro"===Z4Setting.mode}constructor(){}}class Z4HTMLFactory{static HTML=Z4HTMLFactory.initHTML();static get(t){return Z4HTMLFactory.HTML[t]}static initHTML(){let t=new Array,e=new XMLHttpRequest;return Z4Loader.allFiles?(e.open("GET",Z4Loader.UP+"src/giada/html_list.properties?random="+Math.random(),!1),e.send(),new String(e.responseText).split("\n").forEach((i=>{i&&!i.startsWith("#")&&(e.open("GET",Z4Loader.UP+"src/"+i,!1),e.send(),t[i]=e.responseText)}))):(e.open("GET",Z4Loader.UP+"build/bundle-"+Z4Loader.version+".html",!1),e.send(),Z4HTMLFactory.readHTMLs(t,e.responseText)),t}static readHTMLs(t,e){new String(e).split("\n").forEach((e=>{if(e){let i=e.split(":=");t[i[0].trim()]=i[1].trim()}}))}constructor(){}}class Z4MessageFactory{static MESSAGE=Z4MessageFactory.initMessages();static get(t){return Z4MessageFactory.MESSAGE[t]}static changingLanguage(){Z4MessageFactory.MESSAGE=Z4MessageFactory.initMessages(),document.querySelectorAll("[data-token-lang-inner_text]").forEach((t=>t.innerText=Z4MessageFactory.get(t.getAttribute("data-token-lang-inner_text"))))}static initMessages(){let t=new Array,e=Z4Loader.UP+(Z4Loader.allFiles?"src/message/":"build/message/"),i=Z4Loader.allFiles?"message-"+Z4Setting.getLanguage()+".properties?random="+Math.random():"message-"+Z4Setting.getLanguage()+"-"+Z4Loader.version+".properties",s=new XMLHttpRequest;if(s.open("GET",e+i,!1),s.send(),Z4MessageFactory.readMessages(t,s.responseText),0===Object.keys(t).length){Z4Setting.setLanguage("en"),i=Z4Loader.allFiles?"message-en.properties?random="+Math.random():"message-en-"+Z4Loader.version+".properties";let s=new XMLHttpRequest;s.open("GET",e+i,!1),s.send(),Z4MessageFactory.readMessages(t,s.responseText)}return t}static readMessages(t,e){new String(e).split("\n").forEach((e=>{if(e&&!e.startsWith("#")){let i=e.split("=");t[i[0].trim()]=i[1].trim()}}))}constructor(){}}class Z4ImageFactory{static IMAGES=Z4ImageFactory.initImages();static get(t){return Z4ImageFactory.IMAGES[t]}static initImages(){let t=new Array,e=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/"),i=Z4Loader.allFiles?"image_list.properties?random="+Math.random():"image_list-"+Z4Loader.version+".properties",s=new XMLHttpRequest;return s.open("GET",e+i,!1),s.send(),Z4ImageFactory.readImages(e,t,new String(s.responseText).split("\n")),t}static readImages(t,e,i){i.forEach((s=>{if(s&&!s.startsWith("#")){let r=s.split("="),n=new Image;n.onload=s=>Z4ImageFactory.readImages(t,e,i.slice(1)),n.src=t+r[1].trim(),e[r[0].trim()]=n}}))}constructor(){}}class Z4AbstractComponentUI{html=null;constructor(t){this.html=document.createElement("div"),this.html.setAttribute("id","id"+(new Date).getTime()+"_"+parseInt(1e3*Math.random())),this.html.innerHTML=t;let e=this.html.querySelectorAll("#"+this.html.id+" [data-token-lang-inner_text]");for(let t=0;t<e.length;t++){let i=e.item(t);i.innerText=Z4MessageFactory.get(i.getAttribute("data-token-lang-inner_text"))}}querySelector(t){return this.html.querySelector(t)}querySelectorAll(t){return this.html.querySelectorAll(t)}appendTo(t){return t.appendChild(this.html),this}}class Z4AbstractComponentWithValueUI extends Z4AbstractComponentUI{value=null;onchange=t=>{};oninput=t=>{};constructor(t){super(t)}setValue(t){return this.value=t,this}getValue(){return this.value}}class Z4ModalMessageUI{static html=Z4ModalMessageUI.loadHTML();static modal=new bootstrap.Modal(Z4ModalMessageUI.html);static loadHTML(){let t=document.createElement("div");return t.setAttribute("id",(new Date).getTime()+"-"+parseInt(1e3*Math.random())),t.setAttribute("data-bs-backdrop","static"),t.setAttribute("data-bs-keyboard","false"),t.setAttribute("tabindex","-1"),t.setAttribute("style","display:none"),t.className="modal modal-dialog-centered fade",t.innerHTML=Z4HTMLFactory.get("giada/pizzapazza/ui/Z4ModalMessageUI.html"),document.body.appendChild(t),t}static showInfo(t,e,i){Z4ModalMessageUI.showOneButton(t,e,i,"bi bi-info-circle-fill","#0dcaf0")}static showWarning(t,e,i){Z4ModalMessageUI.showOneButton(t,e,i,"bi bi-exclamation-triangle-fill","#ffc107")}static showError(t,e,i){Z4ModalMessageUI.showOneButton(t,e,i,"bi bi-exclamation-octagon-fill","#dc3545")}static showOneButton(t,e,i,s,r){Z4ModalMessageUI.html.querySelector(".modal-title").innerText=t,Z4ModalMessageUI.html.querySelector(".modal-message").innerText=e;let n=Z4ModalMessageUI.html.querySelector(".modal-icon i");n.className=s,n.style.color=r;let o=Z4ModalMessageUI.html.querySelector(".modal-footer");o.innerHTML="",Z4ModalMessageUI.appendButton(Z4MessageFactory.get("OK"),"btn btn-primary",i,o),Z4ModalMessageUI.modal.show()}static showQuestion(t,e,i,s,r,n){Z4ModalMessageUI.html.querySelector(".modal-title").innerText=t,Z4ModalMessageUI.html.querySelector(".modal-message").innerText=e;let o=Z4ModalMessageUI.html.querySelector(".modal-icon i");o.className="bi bi-question-circle-fill",o.style.color="#6c757d";let a=Z4ModalMessageUI.html.querySelector(".modal-footer");a.innerHTML="",i&&Z4ModalMessageUI.appendButton(Z4MessageFactory.get("YES"),"btn btn-primary",i,a),s&&Z4ModalMessageUI.appendButton(Z4MessageFactory.get("NO"),"btn btn-secondary",s,a),r&&Z4ModalMessageUI.appendButton(Z4MessageFactory.get("OK"),"btn btn-primary",r,a),n&&Z4ModalMessageUI.appendButton(Z4MessageFactory.get("CANCEL"),"btn btn-secondary",n,a),Z4ModalMessageUI.modal.show()}static appendButton(t,e,i,s){let r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-bs-dismiss","modal"),r.className=e,r.innerText=t,r.onclick=t=>(i(),null),s.appendChild(r)}constructor(){}}class Z4Math{static TWO_PI=2*Math.PI;static HALF_PI=Math.PI/2;static GOLD_SECTION=(1+Math.sqrt(5))/2;static SQUARE_GOLD_SECTION=Z4Math.GOLD_SECTION*Z4Math.GOLD_SECTION;static RAD2DEG=180/Math.PI;static DEG2RAD=Math.PI/180;static rad2deg(t){return t*Z4Math.RAD2DEG}static deg2rad(t){return t*Z4Math.DEG2RAD}static distance(t,e,i,s){let r=t-i,n=e-s;return Math.sqrt(r*r+n*n)}static atan(t,e,i,s){let r=Math.atan2(s-e,i-t);return r<0?r+Z4Math.TWO_PI:r}static ripple(t,e,i,s){let r=(i-e)*s*Math.random();return(t+=Math.random()>.5?r:-r)<e?e:t>i?i:t}constructor(){}}class Z4Sign{static POSITIVE=new Z4Sign(1);static NEGATIVE=new Z4Sign(-1);static RANDOM=new Z4Sign(0);sign=0;constructor(t){this.sign=t}next(){switch(this.sign){case 1:case-1:return this.sign;case 0:default:return Math.random()>.5?1:-1;case 2:case-2:return this.sign*=-1,this.sign/2}}static alternate(){return new Z4Sign(-2)}}class Z4SignedValue{sign=Z4Sign.RANDOM;value=0;getSign(){return this.sign}setSign(t){return this.sign=t,this}geValue(){return this.value}setValue(t){return this.value=t,this}next(){return this.sign.next()*this.value}}class Z4AbstractRandomValue{value=0;type=0;length=0;step=0;prevRandom=0;controlRandom=0;nextRandom=0;bezierCurve=null;constructor(t,e,i){this.value=t,this.type=e,this.length=i,this.step=0,this.prevRandom=Math.random(),this.controlRandom=1,this.nextRandom=Math.random(),1===this.type&&this.createBezierCurve()}createBezierCurve(){this.bezierCurve=new Bezier(0,this.prevRandom,this.length/2,this.controlRandom,1,this.nextRandom)}isClassic(){return 0===this.type}isBezier(){return 1===this.type}isPolyline(){return 2===this.type}isStepped(){return 3===this.type}getValue(){return this.value}getLength(){return this.length}next(){switch(this.type){case 0:default:return this.value*Math.random();case 1:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.controlRandom=1===this.controlRandom?0:1,this.nextRandom=Math.random(),this.createBezierCurve()):this.step++,value*this.bezierCurve.get(this.step/this.length).y;case 2:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.nextRandom=Math.random()):this.step++,value*((this.nextRandom-this.prevRandom)*this.step/this.length+this.prevRandom);case 3:return this.step===this.length?(this.step=0,this.prevRandom=Math.random()):this.step++,value*this.prevRandom}}}class Z4RandomValue extends Z4AbstractRandomValue{constructor(t,e,i){super(t,e,i)}static classic(t){return new Z4RandomValue(t,0,1)}static bezier(t,e){return new Z4RandomValue(t,1,e)}static polyline(t,e){return new Z4RandomValue(t,2,e)}static stepped(t,e){return new Z4RandomValue(t,3,e)}}class Z4SignedRandomValue extends Z4AbstractRandomValue{sign=Z4Sign.RANDOM;constructor(t,e,i){super(t,e,i)}getSign(){return this.sign}setSign(t){return this.sign=t,this}nextSigned(){return this.sign.next()*this.next()}static classic(t){return new Z4SignedRandomValue(t,0,1)}static bezier(t,e){return new Z4SignedRandomValue(t,1,e)}static polyline(t,e){return new Z4SignedRandomValue(t,2,e)}static stepped(t,e){return new Z4SignedRandomValue(t,3,e)}}class Z4AbstractFancifulValue{constant=new Z4SignedValue;random=Z4SignedRandomValue.classic(0);proportional=new Z4SignedValue;uniformSign=!1;setConstant(t){return this.constant=t,this}getConstant(){return this.constant}setRandom(t){return this.random=t,this}getRandom(){return this.random}setProportional(t){return this.proportional=t,this}getProportional(){return this.proportional}setUniformSign(t){return this.uniformSign=t,this}isUniformSign(){return this.uniformSign}next(t){return Z4Setting.isLiteMode()?this.constant.next():Z4Setting.isStandardMode()?this.uniformSign?this.constant.getSign().next()*(this.constant.geValue()+this.random.next()):this.constant.next()+this.random.nextSigned():Z4Setting.isProMode()?this.uniformSign?this.constant.getSign().next()*(this.constant.geValue()+this.random.next()+t*this.proportional.geValue()):this.constant.next()+this.random.nextSigned()+t*this.proportional.next():0}}class Z4FancifulValue extends Z4AbstractFancifulValue{}class Z4Rotation extends Z4AbstractFancifulValue{type=0;startAngle=0;delayed=!1;rotationNext=0;constructor(t){super(),this.type=t}isFixed(){return 0===this.type}isCumulative(){return 1===this.type}isRelativeToPath(){return 2===this.type}getStartAngle(){return this.startAngle}setStartAngle(t){return this.startAngle=t,this}isDelayed(){return this.delayed}setDelayed(t){return this.delayed=t,this}next(t){let e=Z4Math.deg2rad(this.startAngle+super.next(0));switch(this.type){case 0:return e+(this.delayed?Math.PI:0);case 1:return this.rotationNext+=e,this.rotationNext+(this.delayed?Math.PI:0);case 2:return e+t+(this.delayed?Math.PI:0);default:return 0}}nextSide(t,e){switch(this.type){case 0:case 1:t.setSide(Z4Sign.POSITIVE);break;case 2:t.setSide(e?e.direction(t.getZ4Vector()):Z4Sign.RANDOM)}}static fixed(){return new Z4Rotation(0)}static cumulative(){return new Z4Rotation(1)}static relativeToPath(){return new Z4Rotation(2)}}class Z4Shape2D{static CIRCLE=new Z4Shape2D(0);static TRIANGLE=new Z4Shape2D(3);static SQUARE=new Z4Shape2D(-4);static DIAMOND=new Z4Shape2D(4);static PENTAGON=new Z4Shape2D(5);static HEXAGON=new Z4Shape2D(6);static SEPTAGON=new Z4Shape2D(7);static HEPTAGON=new Z4Shape2D(8);static STAR=new Z4Shape2D(-5);path=new Path2D;constructor(t){let e=.5,i=0,s=0;switch(t){case 0:this.path.arc(0,0,e,0,Z4Math.TWO_PI);break;case-4:this.path.rect(-.5,-.5,1,1);break;case-5:i=-Z4Math.HALF_PI,s=Z4Math.TWO_PI/5;let r=e/Z4Math.SQUARE_GOLD_SECTION;this.path.moveTo(Math.cos(i)*e,Math.sin(i)*e),i=3*s+Z4Math.HALF_PI,this.path.lineTo(Math.cos(i)*r,Math.sin(i)*r);for(let t=1;t<5;t++)i=s*t-Z4Math.HALF_PI,this.path.lineTo(Math.cos(i)*e,Math.sin(i)*e),i=s*(t+3)+Z4Math.HALF_PI,this.path.lineTo(Math.cos(i)*r,Math.sin(i)*r);break;default:i=-Z4Math.HALF_PI,s=Z4Math.TWO_PI/t,this.path.moveTo(Math.cos(i)*e,Math.sin(i)*e);for(let r=1;r<t;r++)i=s*r-Z4Math.HALF_PI,this.path.lineTo(Math.cos(i)*e,Math.sin(i)*e)}this.path.closePath()}getPath(){return path}}class Z4Vector{x0=0;y0=0;x=0;y=0;module=0;phase=0;constructor(t,e,i,s,r,n){this.x0=t,this.y0=e,this.x=i,this.y=s,this.module=r,this.phase=n}static fromPoints(t,e,i,s){return new Z4Vector(t,e,i,s,Z4Math.distance(t,e,i,s),Z4Math.atan(t,e,i,s))}static fromVector(t,e,i,s){return new Z4Vector(t,e,t+i*Math.cos(s),e+i*Math.sin(s),i,s)}clone(){return new Z4Vector(this.x0,this.y0,this.x,this.y,this.module,this.phase)}getX0(){return this.x0}getY0(){return this.y0}getX(){return this.x}getY(){return this.y}getModule(){return this.module}getPhase(){return this.phase}direction(t){let e=this.x-this.x0,i=this.y-this.y0,s=t.x-t.x0,r=t.y-t.y0;return Math.atan2(e*r-i*s,e*s+i*r)>=0?Z4Sign.POSITIVE:Z4Sign.NEGATIVE}}class Z4Point{z4Vector=Z4Vector.fromPoints(0,0,1,1);intensity=1;lighting=Z4Lighting.NONE;colorPosition=-1;drawBounds=!1;side=Z4Sign.RANDOM;useVectorModuleAsSize=!1;clone(){let t=new Z4Point;return t.z4Vector=this.z4Vector.clone(),t.intensity=this.intensity,t.lighting=this.lighting,t.colorPosition=this.colorPosition,t.drawBounds=this.drawBounds,t.side=this.side,t.useVectorModuleAsSize=this.useVectorModuleAsSize,t}getZ4Vector(){return this.z4Vector}setZ4Vector(t){return this.z4Vector=t,this}getIntensity(){return this.intensity}getLighting(){return this.lighting}setLighting(t){return this.lighting=t,this}getColorPosition(){return this.colorPosition}setColorPosition(t){return this.colorPosition=t,this}isDrawBounds(){return this.drawBounds}setSide(t){return this.side=t,this}isUseVectorModuleAsSize(){return this.useVectorModuleAsSize}}class Z4SignedValueUI extends Z4AbstractComponentWithValueUI{toggle=this.querySelector(".sign-button");toggleImg=this.querySelector(".sign-button img");text=this.querySelector(".value");spinner=this.querySelector(".spinner");applySpin=()=>this.spin();isApplySpin=!1;static PATH=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/");static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4SignedValueUI.html");constructor(){super(Z4SignedValueUI.UI),this.toggleImg.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+this.toggle.getAttribute("data-value")+".svg");let t=this.querySelectorAll(".dropdown-menu img");for(let e=0;e<t.length;e++){let i=t.item(e);i.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+i.getAttribute("data-icon")+".svg")}let e=this.querySelectorAll(".dropdown-item");for(let t=0;t<e.length;t++){let i=e.item(t);i.onclick=t=>{switch(this.toggle.setAttribute("data-value",i.getAttribute("data-value")),this.toggleImg.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+i.getAttribute("data-value")+".svg"),this.toggle.getAttribute("data-value")){case"positive":this.onchange(this.value.setSign(Z4Sign.POSITIVE));break;case"negative":this.onchange(this.value.setSign(Z4Sign.NEGATIVE));break;case"random":this.onchange(this.value.setSign(Z4Sign.RANDOM));break;case"alternate":this.onchange(this.value.setSign(Z4Sign.alternate()))}return null}}this.text.oninput=t=>(this.oninput(this.value.setValue(this.text.valueAsNumber)),null),this.text.onchange=t=>(this.onchange(this.value.setValue(this.text.valueAsNumber)),null),this.text.onfocus=t=>(this.text.select(),null),Z4Loader.touch?(this.spinner.ontouchstart=t=>this.startSpin(),this.spinner.ontouchend=t=>this.stopSpin()):(this.spinner.onmousedown=t=>this.startSpin(),this.spinner.onmouseup=t=>this.stopSpin()),this.setValue(new Z4SignedValue)}startSpin(){return this.isApplySpin=!0,this.applySpin(),null}stopSpin(){return this.isApplySpin=!1,this.spinner.value="0",null}spin(){let t=parseFloat(this.text.getAttribute("min")),e=parseFloat(this.text.getAttribute("max")),i=this.spinner.valueAsNumber,s=1;i&&(s=Math.abs(i),i=Math.max(t,this.text.valueAsNumber+(i>0?1:-1)),i=Math.min(i,e),this.text.value=""+i,this.oninput(this.value.setValue(this.text.valueAsNumber))),this.isApplySpin?setTimeout(this.applySpin,500/s):this.onchange(this.value.setValue(this.text.valueAsNumber))}setRange(t,e){return this.text.setAttribute("min",""+t),this.text.setAttribute("max",""+e),this}setSignVisible(t){return t?(this.querySelector(".number-group").classList.add("input-group"),this.querySelector(".sign-label").classList.remove("sign-label-not-visible"),this.toggle.classList.remove("sign-toggle-not-visible")):(this.querySelector(".number-group").classList.remove("input-group"),this.querySelector(".sign-label").classList.add("sign-label-not-visible"),this.toggle.classList.add("sign-toggle-not-visible")),this}setValueLabel(t,e,i){let s=this.querySelector(".value-label");return s.setAttribute("data-token-lang-inner_text",t),s.innerText=Z4MessageFactory.get(t),s.style.fontWeight=e?"700":"400",s.style.fontStyle=i?"italic":"normal",this}setValue(t){super.setValue(t);let e=null;return e=t.getSign()===Z4Sign.POSITIVE?"positive":t.getSign()===Z4Sign.NEGATIVE?"negative":t.getSign()===Z4Sign.RANDOM?"random":"alternate",this.toggle.setAttribute("data-value",e),this.toggleImg.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+e+".svg"),this.text.value=""+t.geValue(),this}}class Z4Lighting{static NONE=new Z4Lighting;static LIGTHED=new Z4Lighting;static DARKENED=new Z4Lighting;constructor(){}}class Z4Progression{static SPATIAL=new Z4Progression;static TEMPORAL=new Z4Progression;static RELATIVE_TO_PATH=new Z4Progression;static RANDOM=new Z4Progression;constructor(){}}class Z4AbstractColor{a=0;r=0;g=0;b=0;argb=0;hex=null;constructor(t,e,i,s){this.a=t,this.r=e,this.g=i,this.b=s,this.init()}init(){return this.argb=this.a<<24|this.r<<16|this.g<<8|this.b,this.hex="#"+new Number(this.r).toString(16).padStart(2,"0")+new Number(this.g).toString(16).padStart(2,"0")+new Number(this.b).toString(16).padStart(2,"0")+new Number(this.a).toString(16).padStart(2,"0"),this}getComponents(){return new Array(this.a,this.r,this.g,this.b)}getARGB(){return this.argb}getHEX(){return this.hex}set(t){return this.a=t>>>24&255,this.r=t>>>16&255,this.g=t>>>8&255,this.b=255&t,this.init()}gray(){let t=parseInt(.21*this.r+.71*this.g+.08*this.b);return this.r=t,this.g=t,this.b=t,this.init()}negative(){return this.r=255-this.r,this.g=255-this.g,this.b=255-this.b,this.init()}lighted(t){return this.r=parseInt((255-this.r)*t+this.r),this.g=parseInt((255-this.g)*t+this.g),this.b=parseInt((255-this.b)*t+this.b),this.init()}darkened(t){return t=1-t,this.r=parseInt(t*this.r),this.g=parseInt(t*this.g),this.b=parseInt(t*this.b),this.init()}}class Z4Color extends Z4AbstractColor{constructor(t,e,i,s){super(t,e,i,s)}static fromARGB(t){return new Z4Color(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}static fromHEX(t,e){let i=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(t);return new Z4Color(e,parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16))}static fromZ4AbstractColor(t){return Z4Color.fromARGB(t.getARGB())}static fromZ4AbstractColors(t,e,i){let s=t.getComponents(),r=e.getComponents();return new Z4Color(parseInt((r[0]-s[0])*i+s[0]),parseInt((r[1]-s[1])*i+s[1]),parseInt((r[2]-s[2])*i+s[2]),parseInt((r[3]-s[3])*i+s[3]))}}class Z4StopColor extends Z4AbstractColor{position=0;constructor(t,e,i,s,r){super(t,e,i,s),this.position=r}getPosition(){return this.position}setPosition(t){return this.position=t,this}static fromARGB(t,e){return new Z4StopColor(t>>>24&255,t>>>16&255,t>>>8&255,255&t,e)}static fromHEX(t,e,i){let s=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(t);return new Z4StopColor(e,parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16),i)}static fromZ4AbstractColor(t,e){return Z4StopColor.fromARGB(t.getARGB(),e)}}class Z4AbstractGradientColor{z4StopColors=new Array;ripple=0;mirrored=!1;constructor(){this.z4StopColors.push(new Z4StopColor(255,255,255,255,0)),this.z4StopColors.push(new Z4StopColor(255,0,0,0,1))}getComponents(){return this.z4StopColors}addOrUpdateColor(t,e){let i=this.z4StopColors.find(((e,i,s)=>e.getPosition()===t));return i?i.set(e):this.z4StopColors.push(Z4StopColor.fromARGB(e,t)),this}generateColor(t){return this.addOrUpdateColor(t,this.getZ4ColorAt(t,!1,!1).getARGB())}removeColor(t){return this.z4StopColors=this.z4StopColors.filter(((e,i,s)=>e.getPosition()!==t)),this}move(t,e){let i=this.z4StopColors.find(((e,i,s)=>e.getPosition()===t));return i&&0!==t&&1!==t&&0!==e&&1!==e&&i.setPosition(e),this}setRipple(t){return this.ripple=t,this}getRipple(){return this.ripple}setMirrored(t){return this.mirrored=t,this}isMirrored(){return this.mirrored}negative(){return this.z4StopColors.forEach((t=>t.negative())),this}inverted(){return this.z4StopColors.forEach((t=>t.setPosition(1-t.getPosition()))),this}getZ4ColorAt(t,e,i){if(Z4Setting.isLiteMode())return this.z4StopColors.find(((t,e,i)=>1===t.getPosition()));if(Z4Setting.isStandardMode()||Z4Setting.isProMode()){i&&this.mirrored&&(t=2*(t<.5?t:1-t)),e&&0!==this.ripple&&(t=Z4Math.ripple(t,0,1,this.ripple));let s=t,r=this.z4StopColors.filter(((t,e,i)=>1===s?t.getPosition()<s:t.getPosition()<=s)).reduce(((t,e,i,s)=>t&&t.getPosition()>e.getPosition()?t:e)),n=this.z4StopColors.filter(((t,e,i)=>0===s?t.getPosition()>s:t.getPosition()>=s)).reduce(((t,e,i,s)=>t&&t.getPosition()<e.getPosition()?t:e));if(r===n)return r;{let e=(t-r.getPosition())/(n.getPosition()-r.getPosition());return Z4Color.fromZ4AbstractColors(r,n,e)}}return null}getLinearGradient(t,e,i,s,r){let n=t.createLinearGradient(e,i,s,r);return this.z4StopColors.forEach(((t,e,i)=>n.addColorStop(t.getPosition(),t.getHEX()))),n}getRadialGradient(t,e,i,s,r,n,o){let a=t.createRadialGradient(e,i,s,r,n,o);return this.z4StopColors.forEach(((t,e,i)=>a.addColorStop(t.getPosition(),t.getHEX()))),a}getConicGradient(t,e,i,s){let r=t.createConicGradient(s,e,i);return this.z4StopColors.forEach(((t,e,i)=>r.addColorStop(t.getPosition(),t.getHEX()))),r}}class Z4GradientColor extends Z4AbstractGradientColor{constructor(){super()}static fromZ4AbstractGradientColor(t){let e=new Z4GradientColor;return t.getComponents().forEach((t=>e.addOrUpdateColor(t.getPosition(),t.getARGB()))),e}static fromZ4AbstractGradientColors(t,e,i){let s=new Z4GradientColor;return t.getComponents().forEach((t=>{let r=e.getZ4ColorAt(t.getPosition(),!1,!1),n=Z4Color.fromZ4AbstractColors(t,r,i);s.addOrUpdateColor(t.getPosition(),n.getARGB())})),s.setRipple(t.getRipple()).setMirrored(t.isMirrored())}}class Z4StopGradientColor extends Z4AbstractGradientColor{position=0;constructor(t){super(),this.position=t}getPosition(){return this.position}setPosition(t){return this.position=t,this}static fromZ4AbstractGradientColor(t,e){let i=new Z4StopGradientColor(e);return t.getComponents().forEach((t=>i.addOrUpdateColor(t.getPosition(),t.getARGB()))),i.setRipple(t.getRipple()).setMirrored(t.isMirrored())}}class Z4TemporalColor{z4StopGradientColors=new Array;ripple=0;mirrored=!1;constructor(){this.z4StopGradientColors.push(new Z4StopGradientColor(0)),this.z4StopGradientColors.push(new Z4StopGradientColor(1))}getComponents(){return this.z4StopGradientColors}addOrUpdateColor(t,e,i){if(!this.z4StopGradientColors.find(((e,i,s)=>e.getPosition()===t))){let e=this.getZ4GradientColorAt(t,!1,!1);this.z4StopGradientColors.push(Z4StopGradientColor.fromZ4AbstractGradientColor(e,t))}return this.z4StopGradientColors.forEach((s=>{if(s.getPosition()!==t){s.getComponents().find(((t,i,s)=>t.getPosition()===e))||s.generateColor(e)}else s.addOrUpdateColor(e,i)})),this}generateColor(t,e){return-1!==t?this.addOrUpdateColor(t,e,this.getZ4ColorAt(t,e,!1,!1).getARGB()):(-1!==e&&this.z4StopGradientColors.forEach((t=>t.generateColor(e))),this)}removeColor(t,e){return 0!==t&&1!==t&&(this.z4StopGradientColors=this.z4StopGradientColors.filter(((e,i,s)=>e.getPosition()!==t))),0!==e&&1!==e&&this.z4StopGradientColors.forEach((t=>t.removeColor(e))),this}move(t,e,i,s){let r=this.z4StopGradientColors.find(((e,i,s)=>e.getPosition()===t));return r&&0!==t&&1!==t&&0!==e&&1!==e&&r.setPosition(e),this.z4StopGradientColors.forEach((t=>t.move(i,s))),this}setRipple(t,e){return this.ripple=t,this.z4StopGradientColors.forEach((t=>t.setRipple(e))),this}getTemporalRipple(){return this.ripple}getSpatialRipple(){return this.z4StopGradientColors[0].getRipple()}setMirrored(t,e){return this.mirrored=t,this.z4StopGradientColors.forEach((t=>t.setMirrored(e))),this}isTemporalyMirrored(){return this.mirrored}isSpatialyMirrored(){return this.z4StopGradientColors[0].isMirrored()}negative(){return this.z4StopGradientColors.forEach((t=>t.negative())),this}inverted(t,e){return t&&this.z4StopGradientColors.forEach((t=>t.setPosition(1-t.getPosition()))),e&&this.z4StopGradientColors.forEach((t=>t.inverted())),this}getZ4GradientColorAt(t,e,i){if(Z4Setting.isLiteMode()||Z4Setting.isStandardMode())return this.z4StopGradientColors.find(((t,e,i)=>0===t.getPosition()));if(Z4Setting.isProMode()){i&&this.mirrored&&(t=2*(t<.5?t:1-t)),e&&0!==this.ripple&&(t=Z4Math.ripple(t,0,1,this.ripple));let s=t,r=this.z4StopGradientColors.filter(((t,e,i)=>1===s?t.getPosition()<s:t.getPosition()<=s)).reduce(((t,e,i,s)=>t&&t.getPosition()>e.getPosition()?t:e)),n=this.z4StopGradientColors.filter(((t,e,i)=>0===s?t.getPosition()>s:t.getPosition()>=s)).reduce(((t,e,i,s)=>t&&t.getPosition()<e.getPosition()?t:e));if(r===n)return r;{let t=(s-r.getPosition())/(n.getPosition()-r.getPosition());return Z4GradientColor.fromZ4AbstractGradientColors(r,n,t)}}return null}getZ4ColorAt(t,e,i,s){return Z4Setting.isLiteMode()?this.getZ4GradientColorAt(0,!1,!1).getZ4ColorAt(1,!1,!1):Z4Setting.isStandardMode()?this.getZ4GradientColorAt(0,!1,!1).getZ4ColorAt(e,i,s):Z4Setting.isProMode()?this.getZ4GradientColorAt(t,i,s).getZ4ColorAt(e,i,s):null}}class Z4Painter{draw(t,e,i){}getColor(t){return t}}class Z4ArrowPainter extends Z4Painter{bool=!1;draw(t,e,i){this.bool=!this.bool;let s=e.getIntensity()*e.getZ4Vector().getModule();return t.save(),t.lineWidth=1,t.strokeStyle=this.getColor("black"),t.beginPath(),t.arc(0,0,2,0,Z4Math.TWO_PI),t.stroke(),t.strokeStyle=this.getColor(this.bool?"blue":"red"),t.beginPath(),t.moveTo(0,0),t.lineTo(s,0),t.lineTo(s-5,-2.5),t.lineTo(s-5,2.5),t.lineTo(s,0),t.stroke(),t.restore(),this}}class Z4ClassicPainter extends Z4Painter{draw(t,e,i){return this}}class Z4NaturalFigurePainter extends Z4Painter{draw(t,e,i){return this}}class Z4CenteredFigurePainter extends Z4Painter{draw(t,e,i){return this}}class Z4Action{static START=new Z4Action;static CONTINUE=new Z4Action;static STOP=new Z4Action;constructor(){}}class Z4PointIterator{progression=Z4Progression.SPATIAL;temporalStepProgression=.1;lighting=Z4Lighting.NONE;rotation=Z4Rotation.fixed();z4Point=new Z4Point;P=new Object;hasNext=!1;constructor(){this.P.x=0,this.P.y=0}seProgression(t,e,i){return this.progression=t,this.temporalStepProgression=e,this.lighting=i,this}setRotation(t){return this.rotation=t,this}getRotation(){return this.rotation}draw(t,e,i){}next(){}drawDemo(t,e,i){}getColor(t){return t}}
//# sourceMappingURL=bundle-0.9.0.min.js.map