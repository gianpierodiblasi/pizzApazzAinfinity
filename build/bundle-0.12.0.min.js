class Z4Setting{static language=Z4Setting.initLanguage();static theme=Z4Setting.initTheme();static initLanguage(){let e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let s=e[t].trim();if(s.startsWith("z4language"))return s.substring(11)}return navigator.languages?navigator.languages[0].substring(0,2):navigator.language?navigator.language.substring(0,2):navigator.userLanguage?navigator.userLanguage.substring(0,2):"en"}static initTheme(){Z4Setting.theme="auto";let e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let s=e[t].trim();s.startsWith("z4theme")&&(Z4Setting.theme=s.substring(8))}return Z4Setting.setTheme(Z4Setting.theme),Z4Setting.theme}static setLanguage(e){let t=new Date;t.setTime(t.getTime()+31536e6),document.cookie="z4language="+e+";expires="+t.toUTCString()+";path="+Z4Loader.path,Z4Setting.language=e}static getLanguage(){return Z4Setting.language}static setTheme(e){Z4Setting.theme=e;let t=new Date;switch(t.setTime(t.getTime()+31536e6),document.cookie="z4theme="+e+";expires="+t.toUTCString()+";path="+Z4Loader.path,Z4Setting.theme){case"auto":window.matchMedia?Z4Setting.addDarkModeListener():document.body.classList.remove("z4-dark");break;case"light":document.body.classList.remove("z4-dark");break;case"dark":document.body.classList.add("z4-dark")}}static addDarkModeListener(){if("auto"===Z4Setting.theme){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("z4-dark"):document.body.classList.remove("z4-dark");let e=new Object;e.once=!0,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>Z4Setting.addDarkModeListener()),e)}}static getTheme(){return Z4Setting.theme}constructor(){}}class Z4HTMLFactory{static HTML=Z4HTMLFactory.initHTML();static get(e){return Z4HTMLFactory.HTML[e]}static initHTML(){let e=new Array,t=new XMLHttpRequest;return Z4Loader.allFiles?(t.open("GET",Z4Loader.UP+"src/giada/html_list.properties?random="+Math.random(),!1),t.send(),new String(t.responseText).split("\n").forEach((s=>{s&&!s.startsWith("#")&&(t.open("GET",Z4Loader.UP+"src/"+s,!1),t.send(),e[s]=t.responseText)}))):(t.open("GET",Z4Loader.UP+"build/bundle-"+Z4Loader.version+".html",!1),t.send(),Z4HTMLFactory.readHTMLs(e,t.responseText)),e}static readHTMLs(e,t){new String(t).split("\n").forEach((t=>{if(t){let s=t.split(":=");e[s[0].trim()]=s[1].trim()}}))}constructor(){}}class Z4MessageFactory{static MESSAGE=Z4MessageFactory.initMessages();static get(e){return Z4MessageFactory.MESSAGE[e]}static changingLanguage(){Z4MessageFactory.MESSAGE=Z4MessageFactory.initMessages(),document.querySelectorAll("[data-token-lang-inner_text]").forEach((e=>e.innerHTML=Z4MessageFactory.get(e.getAttribute("data-token-lang-inner_text"))))}static initMessages(){let e=new Array,t=Z4Loader.UP+(Z4Loader.allFiles?"src/message/":"build/message/"),s=Z4Loader.allFiles?"message-"+Z4Setting.getLanguage()+".properties?random="+Math.random():"message-"+Z4Setting.getLanguage()+"-"+Z4Loader.version+".properties",i=new XMLHttpRequest;if(i.open("GET",t+s,!1),i.send(),Z4MessageFactory.readMessages(e,i.responseText),0===Object.keys(e).length){Z4Setting.setLanguage("en"),s=Z4Loader.allFiles?"message-en.properties?random="+Math.random():"message-en-"+Z4Loader.version+".properties";let i=new XMLHttpRequest;i.open("GET",t+s,!1),i.send(),Z4MessageFactory.readMessages(e,i.responseText)}return e}static readMessages(e,t){new String(t).split("\n").forEach((t=>{if(t&&!t.startsWith("#")){let s=t.split("=");e[s[0].trim()]=s[1].trim()}}))}constructor(){}}class Z4ImageFactory{static IMAGES=Z4ImageFactory.initImages();static get(e){return Z4ImageFactory.IMAGES[e]}static initImages(){let e=new Array,t=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/"),s=Z4Loader.allFiles?"image_list.properties?random="+Math.random():"image_list-"+Z4Loader.version+".properties",i=new XMLHttpRequest;return i.open("GET",t+s,!1),i.send(),Z4ImageFactory.readImages(t,e,new String(i.responseText).split("\n")),e}static readImages(e,t,s){s.forEach((i=>{if(i&&!i.startsWith("#")){let n=i.split("="),a=new Image;a.onload=i=>Z4ImageFactory.readImages(e,t,s.slice(1)),a.src=e+n[1].trim(),t[n[0].trim()]=a}}))}constructor(){}}class Z4AbstractComponentUI{root=null;devicePixelRatioListener=null;constructor(e){this.root=document.createElement("div"),this.root.id=this.getUniqueID(),this.root.innerHTML=e;let t=this.root.querySelectorAll("#"+this.root.id+" [data-token-lang-inner_text]");for(let e=0;e<t.length;e++){let s=t.item(e);s.innerHTML=Z4MessageFactory.get(s.getAttribute("data-token-lang-inner_text"))}}getUniqueID(){return"id"+(new Date).getTime()+"_"+parseInt(1e3*Math.random())}initDevicePixelRatio(e){window.matchMedia&&(this.devicePixelRatioListener=()=>{e(),this.addDevicePixelRatioListener()},this.addDevicePixelRatioListener())}addDevicePixelRatioListener(){let e=new Object;e.once=!0,window.matchMedia("(resolution: "+window.devicePixelRatio+"dppx)").addEventListener("change",this.devicePixelRatioListener,e)}disposeDevicePixelRatio(){window.matchMedia&&window.matchMedia("(resolution: "+window.devicePixelRatio+"dppx)").removeEventListener("change",this.devicePixelRatioListener)}dispose(){}querySelector(e){return this.root.querySelector(e)}querySelectorAll(e){return this.root.querySelectorAll(e)}appendToElement(e){return e.appendChild(this.root),this}}class Z4AbstractComponentWithValueUI extends Z4AbstractComponentUI{value=null;onchange=e=>{};oninput=e=>{};constructor(e){super(e)}setValue(e){}getValue(){return this.value}}class Z4ModalMessageUI{static html=Z4ModalMessageUI.loadHTML();static modal=new bootstrap.Modal(Z4ModalMessageUI.html);static loadHTML(){let e=document.createElement("div");return e.id=(new Date).getTime()+"-"+parseInt(1e3*Math.random()),e.setAttribute("data-bs-backdrop","static"),e.setAttribute("data-bs-keyboard","false"),e.setAttribute("tabindex","-1"),e.setAttribute("style","display:none"),e.className="modal modal-dialog-centered fade",e.innerHTML=Z4HTMLFactory.get("giada/pizzapazza/ui/Z4ModalMessageUI.html"),document.body.appendChild(e),e}static showInfo(e,t,s){Z4ModalMessageUI.showOneButton(e,t,s,"bi bi-info-circle-fill","#0dcaf0")}static showWarning(e,t,s){Z4ModalMessageUI.showOneButton(e,t,s,"bi bi-exclamation-triangle-fill","#ffc107")}static showError(e,t,s){Z4ModalMessageUI.showOneButton(e,t,s,"bi bi-exclamation-octagon-fill","#dc3545")}static showOneButton(e,t,s,i,n){Z4ModalMessageUI.html.querySelector(".modal-title").innerHTML=e,Z4ModalMessageUI.html.querySelector(".modal-message").innerHTML=t;let a=Z4ModalMessageUI.html.querySelector(".modal-icon i");a.className=i,a.style.color=n;let r=Z4ModalMessageUI.html.querySelector(".modal-footer");r.innerHTML="",Z4ModalMessageUI.appendButton(Z4MessageFactory.get("OK"),"btn btn-primary",s,r),Z4ModalMessageUI.modal.show()}static showQuestion(e,t,s,i,n,a){let r=new Array,l=new Array,o=new Array;Z4ModalMessageUI.push("YES",s,!0,r,l,o),Z4ModalMessageUI.push("NO",i,!1,r,l,o),Z4ModalMessageUI.push("OK",n,!0,r,l,o),Z4ModalMessageUI.push("CANCEL",a,!1,r,l,o),Z4ModalMessageUI.showOpenQuestion(e,t,r,l,o)}static push(e,t,s,i,n,a){t&&(i.push(Z4MessageFactory.get(e)),n.push(t),a.push(s))}static showOpenQuestion(e,t,s,i,n){Z4ModalMessageUI.html.querySelector(".modal-title").innerHTML=e,Z4ModalMessageUI.html.querySelector(".modal-message").innerHTML=t;let a=Z4ModalMessageUI.html.querySelector(".modal-icon i");a.className="bi bi-question-circle-fill",a.style.color="#6c757d";let r=Z4ModalMessageUI.html.querySelector(".modal-footer");r.innerHTML="",s.forEach(((e,t,s)=>{Z4ModalMessageUI.appendButton(e,"btn "+(n[t]?"btn-primary":"btn-secondary"),i[t],r)})),Z4ModalMessageUI.modal.show()}static appendButton(e,t,s,i){let n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-bs-dismiss","modal"),n.className=t,n.innerHTML=e,n.onclick=e=>(s(),null),i.appendChild(n)}constructor(){}}class Z4Math{static TWO_PI=2*Math.PI;static HALF_PI=Math.PI/2;static GOLD_SECTION=(1+Math.sqrt(5))/2;static SQUARE_GOLD_SECTION=Z4Math.GOLD_SECTION*Z4Math.GOLD_SECTION;static RAD2DEG=180/Math.PI;static DEG2RAD=Math.PI/180;static rad2deg(e){return e*Z4Math.RAD2DEG}static deg2rad(e){return e*Z4Math.DEG2RAD}static distance(e,t,s,i){let n=e-s,a=t-i;return Math.sqrt(n*n+a*a)}static atan(e,t,s,i){let n=Math.atan2(i-t,s-e);return n<0?n+Z4Math.TWO_PI:n}static ripple(e,t,s,i){let n=(s-t)*i*Math.random();return(e+=Math.random()>.5?n:-n)<t?t:e>s?s:e}constructor(){}}class Z4Sign{static POSITIVE=new Z4Sign(1);static NEGATIVE=new Z4Sign(-1);static RANDOM=new Z4Sign(0);sign=0;constructor(e){this.sign=e}next(){switch(this.sign){case 1:case-1:return this.sign;case 0:default:return Math.random()>.5?1:-1;case 2:case-2:return this.sign*=-1,this.sign/2}}static alternate(){return new Z4Sign(-2)}}class Z4SignedValue{sign=Z4Sign.RANDOM;value=0;getSign(){return this.sign}setSign(e){return this.sign=e,this}getValue(){return this.value}setValue(e){return this.value=e,this}next(){return this.sign.next()*this.value}}class Z4SignedValueUI extends Z4AbstractComponentWithValueUI{valueLabel=this.querySelector(".signed-value-value-label");checkSpinner=this.querySelector(".signed-value-check-spinner");spinner=this.querySelector(".signed-value-range-input");applySpin=()=>this.spin();applyMinusPlus=(e,t)=>this.doMinusPlus(e,t,this.isApplyMinusPlus,(()=>this.applyMinusPlus(e,Math.min(50,t+1))));isApplySpin=!1;isApplyMinusPlus=!1;timeoutID=0;signVisible=!0;min=0;max=1e9;static PATH=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/");static UI=Z4HTMLFactory.get("giada/pizzapazza/math/ui/Z4SignedValueUI.html");constructor(){super(Z4SignedValueUI.UI);let e=this.querySelectorAll(".signed-value-sign-dropdown-menu img");for(let t=0;t<e.length;t++){let s=e.item(t);s.setAttribute("src",Z4SignedValueUI.PATH+"z4sign_"+s.getAttribute("data-icon")+".svg")}let t=this.querySelectorAll(".signed-value-sign-dropdown-menu button");for(let e=0;e<t.length;e++){let s=t.item(e);s.onclick=e=>{switch(this.querySelector(".signed-value-sign-button img").setAttribute("src",s.querySelector("img").getAttribute("src")),s.getAttribute("data-value")){case"positive":this.onchange(this.value.setSign(Z4Sign.POSITIVE));break;case"negative":this.onchange(this.value.setSign(Z4Sign.NEGATIVE));break;case"random":this.onchange(this.value.setSign(Z4Sign.RANDOM));break;case"alternate":this.onchange(this.value.setSign(Z4Sign.alternate()))}return null}}this.checkSpinner.id=this.getUniqueID(),this.checkSpinner.onchange=e=>{let t=this.querySelectorAll(".signed-value-form-control .form-label");for(let e=0;e<t.length;e++)t.item(e).style.display=this.checkSpinner.checked?"inline-block":"none";return this.checkSpinner.checked?(this.spinner.setAttribute("min","-50"),this.spinner.setAttribute("max","50"),this.spinner.value="0"):this.configureRange(),null},this.querySelector(".signed-value-check-spinner-label").setAttribute("for",this.checkSpinner.id);let s=this.querySelector(".signed-value-range-minus"),i=this.querySelector(".signed-value-range-plus");Z4Loader.touch?(this.spinner.ontouchstart=e=>this.startSpin(),this.spinner.ontouchend=e=>this.stopSpin(),s.ontouchstart=e=>this.minusPlus(-1),s.ontouchend=e=>this.minusPlus(0),i.ontouchstart=e=>this.minusPlus(1),i.ontouchend=e=>this.minusPlus(0)):(this.spinner.onmousedown=e=>this.startSpin(),this.spinner.onmouseup=e=>this.stopSpin(),s.onmousedown=e=>this.minusPlus(-1),s.onmouseup=e=>this.minusPlus(0),s.onmouseleave=e=>this.minusPlus(0),i.onmousedown=e=>this.minusPlus(1),i.onmouseup=e=>this.minusPlus(0),i.onmouseleave=e=>this.minusPlus(0)),this.spinner.oninput=e=>{if(!this.checkSpinner.checked){let e=this.getReversedValue(this.spinner.valueAsNumber);this.valueLabel.innerText=""+e,this.oninput(this.value.setValue(e))}return null},this.spinner.onchange=e=>{if(!this.checkSpinner.checked){let e=this.getReversedValue(this.spinner.valueAsNumber);this.valueLabel.innerText=""+e,this.onchange(this.value.setValue(e))}return null},this.setValue(new Z4SignedValue)}startSpin(){return this.checkSpinner.checked&&(this.isApplySpin=!0,this.applySpin()),null}stopSpin(){return this.checkSpinner.checked&&(this.isApplySpin=!1,this.spinner.value="0",this.onchange(this.value)),null}spin(){let e=Math.max(1,Math.abs(this.spinner.valueAsNumber));this.spinner.valueAsNumber?this.doMinusPlus(this.spinner.valueAsNumber>0?1:-1,e,this.isApplySpin,this.applySpin):(clearTimeout(this.timeoutID),this.isApplySpin&&(this.timeoutID=setTimeout(this.applySpin,500/e)))}minusPlus(e){return e?(this.isApplyMinusPlus=!0,this.applyMinusPlus(e,1)):(this.isApplyMinusPlus=!1,clearTimeout(this.timeoutID),this.onchange(this.value)),null}doMinusPlus(e,t,s,i){let n=this.getRangedValue(this.max),a=Math.max(0,this.getRangedValue(this.value.getValue())+e);a=Math.min(a,n);let r=this.getReversedValue(a);this.valueLabel.innerText=""+r,this.checkSpinner.checked||(this.spinner.value=""+a),this.oninput(this.value.setValue(r)),clearTimeout(this.timeoutID),s&&(this.timeoutID=setTimeout(i,500/t))}setRange(e,t){return this.min=e,this.max=t,this.querySelector(".signed-value-range-span").innerHTML="["+e+","+(1e9===t?"&infin;":t)+"]",this.checkSpinner.checked||this.configureRange(),this}configureRange(){this.spinner.setAttribute("min","0"),this.spinner.setAttribute("max",""+this.getRangedValue(this.max)),this.spinner.value=""+this.getRangedValue(this.value.getValue())}getRangedValue(e){let t=0,s=this.min;for(;s<e;)t++,s<100?s++:s<1e3?s+=10:s<1e4?s+=100:s<1e5?s+=1e3:s<1e6?s+=1e4:s<1e7?s+=1e5:s<1e8?s+=1e6:s<1e9&&(s+=1e7);return t}getReversedValue(e){let t=0,s=this.min;for(;t<e;)t++,s<100?s++:s<1e3?s+=10:s<1e4?s+=100:s<1e5?s+=1e3:s<1e6?s+=1e4:s<1e7?s+=1e5:s<1e8?s+=1e6:s<1e9&&(s+=1e7);return s}setSignVisible(e){return this.signVisible=e,e?this.querySelector(".signed-value-input-group").classList.remove("sign-not-visible"):this.querySelector(".signed-value-input-group").classList.add("sign-not-visible"),this}isSignVisible(){return this.signVisible}setValueLabel(e,t,s){let i=this.querySelector(".signed-value-label");return i.setAttribute("data-token-lang-inner_text",e),i.innerHTML=Z4MessageFactory.get(e),i.style.fontWeight=t?"700":"400",i.style.fontStyle=s?"italic":"normal",this}setValue(e){return this.value=e,this.valueLabel.innerText=""+this.value.getValue(),this.value.getSign()===Z4Sign.POSITIVE?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='positive']").getAttribute("src")):this.value.getSign()===Z4Sign.NEGATIVE?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='negative']").getAttribute("src")):this.value.getSign()===Z4Sign.RANDOM?this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='random']").getAttribute("src")):this.querySelector(".signed-value-sign-button img").setAttribute("src",this.querySelector(".signed-value-sign-dropdown-menu img[data-icon='alternate']").getAttribute("src")),this}dispose(){}}
//# sourceMappingURL=bundle-0.12.0.min.js.map