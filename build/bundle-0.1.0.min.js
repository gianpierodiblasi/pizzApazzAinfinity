class Z4Setting{static language=Z4Setting.initLanguage();static darkMode=Z4Setting.initDarkMode();static mode=Z4Setting.initMode();static initLanguage(){let t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let r=t[e].trim();if(r.startsWith("z4language"))return r.substring(11)}return navigator.languages?navigator.languages[0].substring(0,2):navigator.language?navigator.language.substring(0,2):navigator.userLanguage?navigator.userLanguage.substring(0,2):"en"}static initDarkMode(){if(window.matchMedia){let t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener((t=>{Z4Setting.darkMode=t.matches})),t.matches}return!1}static initMode(){let t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let r=t[e].trim();if(r.startsWith("z4mode"))return r.substring(7)}return"standard"}static setLanguage(t){let e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="z4language="+t+";expires="+e.toUTCString()+";path="+Z4Loader.path,Z4Setting.language=t}static getLanguage(){return Z4Setting.language}static isDarkMode(){return Z4Setting.darkMode}static setMode(t){Z4Setting.mode=t;let e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="z4mode="+t+";expires="+e.toUTCString()+";path="+Z4Loader.path}static getMode(){return Z4Setting.mode}static isLiteMode(){return"lite"===Z4Setting.mode}static isStandardMode(){return"standard"===Z4Setting.mode}static isProMode(){return"pro"===Z4Setting.mode}constructor(){}}class Z4MessageFactory{static MESSAGE=Z4MessageFactory.initMessages();static get(t){return Z4MessageFactory.MESSAGE[t]}static changingLanguage(){Z4MessageFactory.MESSAGE=Z4MessageFactory.initMessages(),document.querySelectorAll("[data-token-lang-inner_text]").forEach((t=>t.innerText=Z4MessageFactory.get(t.getAttribute("data-token-lang-inner_text"))))}static initMessages(){let t=new Array,e=Z4Loader.UP+(Z4Loader.allFiles?"src/message/":"build/message/"),r="message-"+Z4Setting.getLanguage()+".properties",i=new XMLHttpRequest;if(i.open("GET",e+r,!1),i.send(),Z4MessageFactory.readMessages(t,i.responseText),0===Object.keys(t).length){Z4Setting.setLanguage("en"),r="message-en.properties";let i=new XMLHttpRequest;i.open("GET",e+r,!1),i.send(),Z4MessageFactory.readMessages(t,i.responseText)}return t}static readMessages(t,e){new String(e).split("\n").forEach((e=>{if(e&&!e.startsWith("#")){let r=e.split("=");t[r[0].trim()]=r[1].trim()}}))}constructor(){}}class Z4ImageFactory{static IMAGES=Z4ImageFactory.initImages();static get(t){return Z4ImageFactory.IMAGES[t]}static initImages(){let t=new Array,e=Z4Loader.UP+(Z4Loader.allFiles?"src/image/":"build/image/"),r=new XMLHttpRequest;return r.open("GET",Z4Loader.UP+"image_list.properties",!1),r.send(),Z4ImageFactory.readImages(e,t,new String(r.responseText).split("\n")),t}static readImages(t,e,r){r.forEach((i=>{if(i&&!i.startsWith("#")){let o=i.split("="),s=new Image;s.onload=i=>Z4ImageFactory.readImages(t,e,r.slice(1)),s.src=t+o[1].trim(),e[o[0].trim()]=s}}))}constructor(){}}class Z4ComponentUI{html=null;onchange=t=>{};static loadHTML(t){let e=Z4Loader.UP+(Z4Loader.allFiles?"src/":"build/html/"),r=new XMLHttpRequest;return r.open("GET",e+t,!1),r.send(),r.responseText}constructor(t){this.html=document.createElement("div"),this.html.setAttribute("id",(new Date).getTime()+"-"+parseInt(1e3*Math.random())),this.html.innerHTML=t}querySelector(t){return this.html.querySelector(t)}appendTo(t){return t.appendChild(this.html),this}}class Z4Math{static TWO_PI=2*Math.PI;static HALF_PI=Math.PI/2;static GOLD_SECTION=(1+Math.sqrt(5))/2;static SQUARE_GOLD_SECTION=Z4Math.GOLD_SECTION*Z4Math.GOLD_SECTION;static RAD2DEG=180/Math.PI;static DEG2RAD=Math.PI/180;static rad2deg(t){return t*Z4Math.RAD2DEG}static deg2rad(t){return t*Z4Math.DEG2RAD}static distance(t,e,r,i){let o=t-r,s=e-i;return Math.sqrt(o*o+s*s)}static atan(t,e,r,i){let o=Math.atan2(i-e,r-t);return o<0?o+Z4Math.TWO_PI:o}static ripple(t,e,r,i){let o=(r-e)*i*Math.random();return(t+=Math.random()>.5?o:-o)<e?e:t>r?r:t}constructor(){}}class Z4Sign{static POSITIVE=new Z4Sign(1);static NEGATIVE=new Z4Sign(-1);static RANDOM=new Z4Sign(0);sign=0;constructor(t){this.sign=t}next(){switch(this.sign){case 1:case-1:return this.sign;case 0:default:return Math.random()>.5?1:-1;case 2:case-2:return this.sign*=-1,this.sign/2}}static alternate(){return new Z4Sign(-2)}}class Z4RandomValue{value=0;type=0;length=0;step=0;prevRandom=0;controlRandom=0;nextRandom=0;bezierCurve=null;constructor(t,e,r){this.value=t,this.type=e,this.length=r,this.step=0,this.prevRandom=Math.random(),this.controlRandom=1,this.nextRandom=Math.random(),1===this.type&&this.createBezierCurve()}createBezierCurve(){this.bezierCurve=new Bezier(0,this.prevRandom,this.length/2,this.controlRandom,1,this.nextRandom)}next(){switch(this.type){case 0:default:return value*Math.random();case 1:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.controlRandom=1===this.controlRandom?0:1,this.nextRandom=Math.random(),this.createBezierCurve()):this.step++,value*this.bezierCurve.get(this.step/this.length).y;case 2:return this.step===this.length?(this.step=0,this.prevRandom=this.nextRandom,this.nextRandom=Math.random()):this.step++,value*((this.nextRandom-this.prevRandom)*this.step/this.length+this.prevRandom);case 3:return this.step===this.length?(this.step=0,this.prevRandom=Math.random()):this.step++,value*this.prevRandom}}static classic(t){return new Z4RandomValue(t,0,0)}static bezier(t,e){return new Z4RandomValue(t,1,e)}static polyline(t,e){return new Z4RandomValue(t,2,e)}static stepped(t,e){return new Z4RandomValue(t,3,e)}}class Z4FancifulValue{constantSign=Z4Sign.RANDOM;constantValue=0;randomSign=Z4Sign.RANDOM;randomValue=Z4RandomValue.classic(0);proportionalSign=Z4Sign.RANDOM;proportionalValue=0;uniformSign=!1;setConstant(t,e){return this.constantSign=t,this.constantValue=e,this}setRandom(t,e){return this.randomSign=t,this.randomValue=e,this}setProportional(t,e){return this.proportionalSign=t,this.proportionalValue=e,this}setUniformSign(t){return this.uniformSign=t,this}next(t){return Z4Setting.isLiteMode()?this.constantSign.next()*this.constantValue:Z4Setting.isStandardMode()?this.uniformSign?this.constantSign.next()*(this.constantValue+this.randomValue.next()):this.constantSign.next()*this.constantValue+this.randomSign.next()*this.randomValue.next():Z4Setting.isProMode()?this.uniformSign?this.constantSign.next()*(this.constantValue+this.randomValue.next()+t*this.proportionalValue):this.constantSign.next()*this.constantValue+this.randomSign.next()*this.randomValue.next()+this.proportionalSign.next()*t*this.proportionalValue:0}}class Z4Lighting{static NONE=new Z4Lighting;static LIGTHED=new Z4Lighting;static DARKENED=new Z4Lighting;constructor(){}}class Z4Progression{static SPATIAL=new Z4Progression;static TEMPORAL=new Z4Progression;static RELATIVE_TO_PATH=new Z4Progression;static RANDOM=new Z4Progression;constructor(){}}class Z4AbstractColor{a=0;r=0;g=0;b=0;argb=0;hex=null;constructor(t,e,r,i){this.a=t,this.r=e,this.g=r,this.b=i,this.init()}init(){return this.argb=this.a<<24|this.r<<16|this.g<<8|this.b,this.hex="#"+new Number(this.r).toString(16).padStart(2,"0")+new Number(this.g).toString(16).padStart(2,"0")+new Number(this.b).toString(16).padStart(2,"0")+new Number(this.a).toString(16).padStart(2,"0"),this}getComponents(){let t=new Array;return t.push(this.a,this.r,this.g,this.b),t}getARGB(){return this.argb}getHEX(){return this.hex}set(t){return this.a=t>>>24&255,this.r=t>>>16&255,this.g=t>>>8&255,this.b=255&t,this.init()}gray(){let t=parseInt(.21*this.r+.71*this.g+.08*this.b);return this.r=t,this.g=t,this.b=t,this.init()}negative(){return this.r=255-this.r,this.g=255-this.g,this.b=255-this.b,this.init()}lighted(t){return this.r=parseInt((255-this.r)*t+this.r),this.g=parseInt((255-this.g)*t+this.g),this.b=parseInt((255-this.b)*t+this.b),this.init()}darkened(t){return t=1-t,this.r=parseInt(t*this.r),this.g=parseInt(t*this.g),this.b=parseInt(t*this.b),this.init()}}class Z4Color extends Z4AbstractColor{constructor(t,e,r,i){super(t,e,r,i)}static fromARGB(t){return new Z4Color(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}static fromHEX(t,e){let r=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(t);return new Z4Color(e,parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16))}static fromZ4AbstractColor(t){return Z4Color.fromARGB(t.getARGB())}static fromZ4AbstractColors(t,e,r){let i=t.getComponents(),o=e.getComponents();return new Z4Color(parseInt((o[0]-i[0])*r+i[0]),parseInt((o[1]-i[1])*r+i[1]),parseInt((o[2]-i[2])*r+i[2]),parseInt((o[3]-i[3])*r+i[3]))}}class Z4StopColor extends Z4AbstractColor{position=0;constructor(t,e,r,i,o){super(t,e,r,i),this.position=o}getPosition(){return this.position}setPosition(t){return this.position=t,this}static fromARGB(t,e){return new Z4StopColor(t>>>24&255,t>>>16&255,t>>>8&255,255&t,e)}static fromHEX(t,e,r){let i=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(t);return new Z4StopColor(e,parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),r)}static fromZ4AbstractColor(t,e){return Z4StopColor.fromARGB(t.getARGB(),e)}}class Z4AbstractGradientColor{z4StopColors=new Array;ripple=0;mirrored=!1;constructor(){this.z4StopColors.push(new Z4StopColor(255,255,255,255,0)),this.z4StopColors.push(new Z4StopColor(255,0,0,0,1))}getComponents(){return this.z4StopColors}addOrUpdateColor(t,e){let r=this.z4StopColors.find(((e,r,i)=>e.getPosition()===t));return r?r.set(e):this.z4StopColors.push(Z4StopColor.fromARGB(e,t)),this}generateColor(t){return this.addOrUpdateColor(t,this.getZ4ColorAt(t,!1,!1).getARGB())}removeColor(t){return this.z4StopColors=this.z4StopColors.filter(((e,r,i)=>e.getPosition()!==t)),this}move(t,e){let r=this.z4StopColors.find(((e,r,i)=>e.getPosition()===t));return r&&0!==t&&1!==t&&0!==e&&1!==e&&r.setPosition(e),this}setRipple(t){return this.ripple=t,this}getRipple(){return this.ripple}setMirrored(t){return this.mirrored=t,this}isMirrored(){return this.mirrored}negative(){return this.z4StopColors.forEach((t=>t.negative())),this}inverted(){return this.z4StopColors.forEach((t=>t.setPosition(1-t.getPosition()))),this}getZ4ColorAt(t,e,r){if(Z4Setting.isLiteMode())return this.z4StopColors.find(((t,e,r)=>1===t.getPosition()));if(Z4Setting.isStandardMode()||Z4Setting.isProMode()){r&&this.mirrored&&(t=2*(t<.5?t:1-t)),e&&0!==this.ripple&&(t=Z4Math.ripple(t,0,1,this.ripple));let i=t,o=this.z4StopColors.filter(((t,e,r)=>1===i?t.getPosition()<i:t.getPosition()<=i)).reduce(((t,e,r,i)=>t&&t.getPosition()>e.getPosition()?t:e)),s=this.z4StopColors.filter(((t,e,r)=>0===i?t.getPosition()>i:t.getPosition()>=i)).reduce(((t,e,r,i)=>t&&t.getPosition()<e.getPosition()?t:e));if(o===s)return o;{let e=(t-o.getPosition())/(s.getPosition()-o.getPosition());return Z4Color.fromZ4AbstractColors(o,s,e)}}return null}getLinearGradient(t,e,r,i,o){let s=t.createLinearGradient(e,r,i,o);return this.z4StopColors.forEach(((t,e,r)=>s.addColorStop(t.getPosition(),t.getHEX()))),s}getRadialGradient(t,e,r,i,o,s,n){let a=t.createRadialGradient(e,r,i,o,s,n);return this.z4StopColors.forEach(((t,e,r)=>a.addColorStop(t.getPosition(),t.getHEX()))),a}getConicGradient(t,e,r,i){let o=t.createConicGradient(i,e,r);return this.z4StopColors.forEach(((t,e,r)=>o.addColorStop(t.getPosition(),t.getHEX()))),o}}class Z4GradientColor extends Z4AbstractGradientColor{constructor(){super()}static fromZ4AbstractGradientColor(t){let e=new Z4GradientColor;return t.getComponents().forEach((t=>e.addOrUpdateColor(t.getPosition(),t.getARGB()))),e}static fromZ4AbstractGradientColors(t,e,r){let i=new Z4GradientColor;return t.getComponents().forEach((t=>{let o=e.getZ4ColorAt(t.getPosition(),!1,!1),s=Z4Color.fromZ4AbstractColors(t,o,r);i.addOrUpdateColor(t.getPosition(),s.getARGB())})),i.setRipple(t.getRipple()).setMirrored(t.isMirrored())}}class Z4StopGradientColor extends Z4AbstractGradientColor{position=0;constructor(t){super(),this.position=t}getPosition(){return this.position}setPosition(t){return this.position=t,this}static fromZ4AbstractGradientColor(t,e){let r=new Z4StopGradientColor(e);return t.getComponents().forEach((t=>r.addOrUpdateColor(t.getPosition(),t.getARGB()))),r}}class Z4TemporalColor{z4StopGradientColors=new Array;ripple=0;mirrored=!1;constructor(){this.z4StopGradientColors.push(new Z4StopGradientColor(0)),this.z4StopGradientColors.push(new Z4StopGradientColor(1))}addOrUpdateColor(t,e,r){if(!this.z4StopGradientColors.find(((e,r,i)=>e.getPosition()===t))){let e=this.getZ4GradientColorAt(t,!1,!1);this.z4StopGradientColors.push(Z4StopGradientColor.fromZ4AbstractGradientColor(e,t))}return this.z4StopGradientColors.forEach((i=>{if(i.getPosition()!==t){i.getComponents().find(((t,r,i)=>t.getPosition()===e))||i.generateColor(e)}else i.addOrUpdateColor(e,r)})),this}generateColor(t,e){return-1!==t?this.addOrUpdateColor(t,e,this.getZ4ColorAt(t,e,!1,!1).getARGB()):(-1!==e&&this.z4StopGradientColors.forEach((t=>t.generateColor(e))),this)}removeColor(t,e){return this.z4StopGradientColors=this.z4StopGradientColors.filter(((e,r,i)=>e.getPosition()!==t)),this.z4StopGradientColors.forEach((t=>t.removeColor(e))),this}move(t,e,r,i){let o=this.z4StopGradientColors.find(((e,r,i)=>e.getPosition()===t));return o&&0!==t&&1!==t&&0!==e&&1!==e&&o.setPosition(e),this.z4StopGradientColors.forEach((t=>t.move(r,i))),this}setRipple(t,e){return this.ripple=t,this.z4StopGradientColors.forEach((t=>t.setRipple(e))),this}setMirrored(t,e){return this.mirrored=t,this.z4StopGradientColors.forEach((t=>t.setMirrored(e))),this}negative(){return this.z4StopGradientColors.forEach((t=>t.negative())),this}inverted(t,e){return t&&this.z4StopGradientColors.forEach((t=>t.setPosition(1-t.getPosition()))),e&&this.z4StopGradientColors.forEach((t=>t.inverted())),this}getZ4GradientColorAt(t,e,r){if(Z4Setting.isLiteMode()||Z4Setting.isStandardMode())return this.z4StopGradientColors.find(((t,e,r)=>0===t.getPosition()));if(Z4Setting.isProMode()){r&&this.mirrored&&(t=2*(t<.5?t:1-t)),e&&0!==this.ripple&&(t=Z4Math.ripple(t,0,1,this.ripple));let i=t,o=this.z4StopGradientColors.filter(((t,e,r)=>1===i?t.getPosition()<i:t.getPosition()<=i)).reduce(((t,e,r,i)=>t&&t.getPosition()>e.getPosition()?t:e)),s=this.z4StopGradientColors.filter(((t,e,r)=>0===i?t.getPosition()>i:t.getPosition()>=i)).reduce(((t,e,r,i)=>t&&t.getPosition()<e.getPosition()?t:e));if(o===s)return o;{let t=(i-o.getPosition())/(s.getPosition()-o.getPosition());return Z4GradientColor.fromZ4AbstractGradientColors(o,s,t)}}return null}getZ4ColorAt(t,e,r,i){return Z4Setting.isLiteMode()?this.getZ4GradientColorAt(0,!1,!1).getZ4ColorAt(1,!1,!1):Z4Setting.isStandardMode()?this.getZ4GradientColorAt(0,!1,!1).getZ4ColorAt(e,r,i):Z4Setting.isProMode()?this.getZ4GradientColorAt(t,r,i).getZ4ColorAt(e,r,i):null}}class Z4ColorUI extends Z4ComponentUI{colorLabel=this.querySelector(".color-label");color=this.querySelector(".form-control-color");formRangeLabel=this.querySelector(".form-range-label");formRange=this.querySelector(".form-range");static UI=Z4ComponentUI.loadHTML("giada/pizzapazza/color/ui/Z4ColorUI.html");constructor(){super(Z4ColorUI.UI),this.colorLabel.innerText=Z4MessageFactory.get("COLOR"),this.querySelector(".opacity-color-label").innerText=Z4MessageFactory.get("OPACITY"),this.color.onchange=t=>(this.onchange(this.getZ4Color()),null),this.formRange.oninput=t=>(this.formRangeLabel.innerText=this.formRange.value,this.onchange(this.getZ4Color()),null)}setColorLabel(t){return this.colorLabel.setAttribute("data-token-lang",t),this.colorLabel.innerText=Z4MessageFactory.get(t),this}setZ4Color(t){return this.color.value=t.getHEX().substring(0,7),this.formRange.valueAsNumber=t.getComponents()[0],this.formRangeLabel.innerText=this.formRange.value,this}getZ4Color(){return Z4Color.fromHEX(this.color.value,this.formRange.valueAsNumber)}}class Z4GradientColorUI extends Z4ComponentUI{gradientColorLabel=this.querySelector(".gradient-color-label");canvas=this.querySelector(".canvas");ctx=this.canvas.getContext("2d");chessboard=this.ctx.createPattern(Z4ImageFactory.get("CHESSBOARD"),"repeat");formRangeLabel=this.querySelector(".form-range-label");mirroredCheck=this.querySelector(".mirrored-check");formRange=this.querySelector(".form-range");gradientColor=new Z4GradientColor;devicePixelRatioListener=null;static UI=Z4ComponentUI.loadHTML("giada/pizzapazza/color/ui/Z4GradientColorUI.html");static WIDTH=500;static HEIGHT=50;constructor(){super(Z4GradientColorUI.UI),this.initDevicePixelRatio(),this.gradientColorLabel.innerText=Z4MessageFactory.get("GRADIENT_COLOR"),this.canvas.style.border="1px dashed gray",this.canvas.style.width=Z4GradientColorUI.WIDTH+"px",this.canvas.style.height=Z4GradientColorUI.HEIGHT+"px";let t=this.querySelector(".sliders");this.gradientColor.getComponents().forEach(((e,r,i)=>{let o=e.getPosition(),s=Z4GradientColorUI.WIDTH*o-16*r,n=document.createElement("input");n.setAttribute("class","form-check-input"),n.setAttribute("type","radio"),n.setAttribute("name","colors"),n.setAttribute("value",""+o),n.setAttribute("style","position:relative;left:"+s+"px"),t.appendChild(n)})),this.querySelector(".ripple-color-label").innerText=Z4MessageFactory.get("RIPPLE"),this.querySelector(".mirrored-label").innerText=Z4MessageFactory.get("MIRRORED"),this.mirroredCheck.onchange=t=>(this.gradientColor.setMirrored(this.mirroredCheck.checked),this.drawCanvas(),this.onchange(this.gradientColor),null),this.formRange.oninput=t=>(this.formRangeLabel.innerText=this.formRange.value,this.gradientColor.setRipple(this.formRange.valueAsNumber),this.drawCanvas(),this.onchange(this.gradientColor),null),this.drawCanvas()}setGradientColorLabel(t){return this.gradientColorLabel.setAttribute("data-token-lang",t),this.gradientColorLabel.innerText=Z4MessageFactory.get(t),this}getZ4GradientColor(){return this.gradientColor}initDevicePixelRatio(){window.matchMedia&&(this.devicePixelRatioListener=()=>{this.drawCanvas(),this.addDevicePixelRatioListener()},this.addDevicePixelRatioListener())}addDevicePixelRatioListener(){let t=new Object;t.once=!0,window.matchMedia("(resolution: "+window.devicePixelRatio+"dppx)").addEventListener("change",this.devicePixelRatioListener,t)}drawCanvas(){this.canvas.width=Math.floor(Z4GradientColorUI.WIDTH*window.devicePixelRatio),this.canvas.height=Math.floor(Z4GradientColorUI.HEIGHT*window.devicePixelRatio);let t=new OffscreenCanvas(Z4GradientColorUI.WIDTH,Z4GradientColorUI.HEIGHT),e=t.getContext("2d");for(let t=0;t<Z4GradientColorUI.WIDTH;t++)e.fillStyle=this.gradientColor.getZ4ColorAt(t/Z4GradientColorUI.WIDTH,!0,!0).getHEX(),e.fillRect(t,0,1,Z4GradientColorUI.HEIGHT);this.ctx.save(),this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),this.ctx.fillStyle=this.chessboard,this.ctx.fillRect(0,0,Z4GradientColorUI.WIDTH,Z4GradientColorUI.HEIGHT),this.ctx.drawImage(t,0,0),this.ctx.restore()}}
//# sourceMappingURL=bundle-0.1.0.min.js.map